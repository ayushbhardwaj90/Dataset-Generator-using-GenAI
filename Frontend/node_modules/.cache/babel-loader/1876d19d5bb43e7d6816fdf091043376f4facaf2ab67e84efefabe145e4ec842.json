{"ast":null,"code":"import _objectWithoutProperties from \"/workspace/Frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nimport _objectSpread from \"/workspace/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nconst _excluded = [\"mixBlendMode\", \"zIndex\"],\n  _excluded2 = [\"styles\"],\n  _excluded3 = [\"color\", \"height\", \"width\"],\n  _excluded4 = [\"beaconComponent\", \"tooltipComponent\"];\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {\n  enumerable: true,\n  configurable: true,\n  writable: true,\n  value\n}) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n// src/literals/index.ts\nvar ACTIONS = {\n  INIT: \"init\",\n  START: \"start\",\n  STOP: \"stop\",\n  RESET: \"reset\",\n  PREV: \"prev\",\n  NEXT: \"next\",\n  GO: \"go\",\n  CLOSE: \"close\",\n  SKIP: \"skip\",\n  UPDATE: \"update\"\n};\nvar EVENTS = {\n  TOUR_START: \"tour:start\",\n  STEP_BEFORE: \"step:before\",\n  BEACON: \"beacon\",\n  TOOLTIP: \"tooltip\",\n  STEP_AFTER: \"step:after\",\n  TOUR_END: \"tour:end\",\n  TOUR_STATUS: \"tour:status\",\n  TARGET_NOT_FOUND: \"error:target_not_found\",\n  ERROR: \"error\"\n};\nvar LIFECYCLE = {\n  INIT: \"init\",\n  READY: \"ready\",\n  BEACON: \"beacon\",\n  TOOLTIP: \"tooltip\",\n  COMPLETE: \"complete\",\n  ERROR: \"error\"\n};\nvar ORIGIN = {\n  BUTTON_CLOSE: \"button_close\",\n  BUTTON_PRIMARY: \"button_primary\",\n  KEYBOARD: \"keyboard\",\n  OVERLAY: \"overlay\"\n};\nvar STATUS = {\n  IDLE: \"idle\",\n  READY: \"ready\",\n  WAITING: \"waiting\",\n  RUNNING: \"running\",\n  PAUSED: \"paused\",\n  SKIPPED: \"skipped\",\n  FINISHED: \"finished\",\n  ERROR: \"error\"\n};\n\n// src/components/index.tsx\nimport * as React9 from \"react\";\nimport isEqual from \"@gilbarbara/deep-equal\";\nimport is6 from \"is-lite\";\nimport treeChanges3 from \"tree-changes\";\n\n// src/modules/dom.ts\nimport scroll from \"scroll\";\nimport scrollParent from \"scrollparent\";\nfunction canUseDOM() {\n  var _a;\n  return !!(typeof window !== \"undefined\" && ((_a = window.document) == null ? void 0 : _a.createElement));\n}\nfunction getClientRect(element) {\n  if (!element) {\n    return null;\n  }\n  return element.getBoundingClientRect();\n}\nfunction getDocumentHeight() {\n  let median = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n  const {\n    body,\n    documentElement\n  } = document;\n  if (!body || !documentElement) {\n    return 0;\n  }\n  if (median) {\n    const heights = [body.scrollHeight, body.offsetHeight, documentElement.clientHeight, documentElement.scrollHeight, documentElement.offsetHeight].sort((a, b) => a - b);\n    const middle = Math.floor(heights.length / 2);\n    if (heights.length % 2 === 0) {\n      return (heights[middle - 1] + heights[middle]) / 2;\n    }\n    return heights[middle];\n  }\n  return Math.max(body.scrollHeight, body.offsetHeight, documentElement.clientHeight, documentElement.scrollHeight, documentElement.offsetHeight);\n}\nfunction getElement(element) {\n  if (typeof element === \"string\") {\n    try {\n      return document.querySelector(element);\n    } catch (error) {\n      if (process.env.NODE_ENV !== \"production\") {\n        console.error(error);\n      }\n      return null;\n    }\n  }\n  return element;\n}\nfunction getStyleComputedProperty(el) {\n  if (!el || el.nodeType !== 1) {\n    return null;\n  }\n  return getComputedStyle(el);\n}\nfunction getScrollParent(element, skipFix, forListener) {\n  if (!element) {\n    return scrollDocument();\n  }\n  const parent = scrollParent(element);\n  if (parent) {\n    if (parent.isSameNode(scrollDocument())) {\n      if (forListener) {\n        return document;\n      }\n      return scrollDocument();\n    }\n    const hasScrolling = parent.scrollHeight > parent.offsetHeight;\n    if (!hasScrolling && !skipFix) {\n      parent.style.overflow = \"initial\";\n      return scrollDocument();\n    }\n  }\n  return parent;\n}\nfunction hasCustomScrollParent(element, skipFix) {\n  if (!element) {\n    return false;\n  }\n  const parent = getScrollParent(element, skipFix);\n  return parent ? !parent.isSameNode(scrollDocument()) : false;\n}\nfunction hasCustomOffsetParent(element) {\n  return element.offsetParent !== document.body;\n}\nfunction hasPosition(el) {\n  let type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"fixed\";\n  if (!el || !(el instanceof HTMLElement)) {\n    return false;\n  }\n  const {\n    nodeName\n  } = el;\n  const styles = getStyleComputedProperty(el);\n  if (nodeName === \"BODY\" || nodeName === \"HTML\") {\n    return false;\n  }\n  if (styles && styles.position === type) {\n    return true;\n  }\n  if (!el.parentNode) {\n    return false;\n  }\n  return hasPosition(el.parentNode, type);\n}\nfunction isElementVisible(element) {\n  var _a;\n  if (!element) {\n    return false;\n  }\n  let parentElement = element;\n  while (parentElement) {\n    if (parentElement === document.body) {\n      break;\n    }\n    if (parentElement instanceof HTMLElement) {\n      const {\n        display,\n        visibility\n      } = getComputedStyle(parentElement);\n      if (display === \"none\" || visibility === \"hidden\") {\n        return false;\n      }\n    }\n    parentElement = (_a = parentElement.parentElement) != null ? _a : null;\n  }\n  return true;\n}\nfunction getElementPosition(element, offset, skipFix) {\n  var _a, _b, _c;\n  const elementRect = getClientRect(element);\n  const parent = getScrollParent(element, skipFix);\n  const hasScrollParent = hasCustomScrollParent(element, skipFix);\n  const isFixedTarget = hasPosition(element);\n  let parentTop = 0;\n  let top = (_a = elementRect == null ? void 0 : elementRect.top) != null ? _a : 0;\n  if (hasScrollParent && isFixedTarget) {\n    const offsetTop = (_b = element == null ? void 0 : element.offsetTop) != null ? _b : 0;\n    const parentScrollTop = (_c = parent == null ? void 0 : parent.scrollTop) != null ? _c : 0;\n    top = offsetTop - parentScrollTop;\n  } else if (parent instanceof HTMLElement) {\n    parentTop = parent.scrollTop;\n    if (!hasScrollParent && !hasPosition(element)) {\n      top += parentTop;\n    }\n    if (!parent.isSameNode(scrollDocument())) {\n      top += scrollDocument().scrollTop;\n    }\n  }\n  return Math.floor(top - offset);\n}\nfunction getScrollTo(element, offset, skipFix) {\n  var _a;\n  if (!element) {\n    return 0;\n  }\n  const {\n    offsetTop = 0,\n    scrollTop = 0\n  } = (_a = scrollParent(element)) != null ? _a : {};\n  let top = element.getBoundingClientRect().top + scrollTop;\n  if (!!offsetTop && (hasCustomScrollParent(element, skipFix) || hasCustomOffsetParent(element))) {\n    top -= offsetTop;\n  }\n  const output = Math.floor(top - offset);\n  return output < 0 ? 0 : output;\n}\nfunction scrollDocument() {\n  var _a;\n  return (_a = document.scrollingElement) != null ? _a : document.documentElement;\n}\nfunction scrollTo(value, options) {\n  const {\n    duration,\n    element\n  } = options;\n  return new Promise((resolve, reject) => {\n    const {\n      scrollTop\n    } = element;\n    const limit = value > scrollTop ? value - scrollTop : scrollTop - value;\n    scroll.top(element, value, {\n      duration: limit < 100 ? 50 : duration\n    }, error => {\n      if (error && error.message !== \"Element already at target scroll position\") {\n        return reject(error);\n      }\n      return resolve();\n    });\n  });\n}\n\n// src/modules/helpers.tsx\nimport { cloneElement, isValidElement } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport innerText from \"react-innertext\";\nimport is from \"is-lite\";\nvar isReact16 = createPortal !== void 0;\nfunction getBrowser() {\n  let userAgent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : navigator.userAgent;\n  let browser = userAgent;\n  if (typeof window === \"undefined\") {\n    browser = \"node\";\n  } else if (document.documentMode) {\n    browser = \"ie\";\n  } else if (/Edge/.test(userAgent)) {\n    browser = \"edge\";\n  } else if (Boolean(window.opera) || userAgent.includes(\" OPR/\")) {\n    browser = \"opera\";\n  } else if (typeof window.InstallTrigger !== \"undefined\") {\n    browser = \"firefox\";\n  } else if (window.chrome) {\n    browser = \"chrome\";\n  } else if (/(Version\\/([\\d._]+).*Safari|CriOS|FxiOS| Mobile\\/)/.test(userAgent)) {\n    browser = \"safari\";\n  }\n  return browser;\n}\nfunction getObjectType(value) {\n  return Object.prototype.toString.call(value).slice(8, -1).toLowerCase();\n}\nfunction getReactNodeText(input) {\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const {\n    defaultValue,\n    step,\n    steps\n  } = options;\n  let text = innerText(input);\n  if (!text) {\n    if (isValidElement(input) && !Object.values(input.props).length && getObjectType(input.type) === \"function\") {\n      const component = input.type({});\n      text = getReactNodeText(component, options);\n    } else {\n      text = innerText(defaultValue);\n    }\n  } else if ((text.includes(\"{step}\") || text.includes(\"{steps}\")) && step && steps) {\n    text = text.replace(\"{step}\", step.toString()).replace(\"{steps}\", steps.toString());\n  }\n  return text;\n}\nfunction hasValidKeys(object, keys) {\n  if (!is.plainObject(object) || !is.array(keys)) {\n    return false;\n  }\n  return Object.keys(object).every(d => keys.includes(d));\n}\nfunction hexToRGB(hex) {\n  const shorthandRegex = /^#?([\\da-f])([\\da-f])([\\da-f])$/i;\n  const properHex = hex.replace(shorthandRegex, (_m, r, g, b) => r + r + g + g + b + b);\n  const result = /^#?([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})$/i.exec(properHex);\n  return result ? [parseInt(result[1], 16), parseInt(result[2], 16), parseInt(result[3], 16)] : [];\n}\nfunction hideBeacon(step) {\n  return step.disableBeacon || step.placement === \"center\";\n}\nfunction isLegacy() {\n  return ![\"chrome\", \"safari\", \"firefox\", \"opera\"].includes(getBrowser());\n}\nfunction log(_ref) {\n  let {\n    data,\n    debug = false,\n    title,\n    warn = false\n  } = _ref;\n  const logFn = warn ? console.warn || console.error : console.log;\n  if (debug) {\n    if (title && data) {\n      console.groupCollapsed(\"%creact-joyride: \".concat(title), \"color: #ff0044; font-weight: bold; font-size: 12px;\");\n      if (Array.isArray(data)) {\n        data.forEach(d => {\n          if (is.plainObject(d) && d.key) {\n            logFn.apply(console, [d.key, d.value]);\n          } else {\n            logFn.apply(console, [d]);\n          }\n        });\n      } else {\n        logFn.apply(console, [data]);\n      }\n      console.groupEnd();\n    } else {\n      console.error(\"Missing title or data props\");\n    }\n  }\n}\nfunction noop() {\n  return void 0;\n}\nfunction objectKeys(input) {\n  return Object.keys(input);\n}\nfunction omit(input) {\n  if (!is.plainObject(input)) {\n    throw new TypeError(\"Expected an object\");\n  }\n  const output = {};\n  for (var _len = arguments.length, filter = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    filter[_key - 1] = arguments[_key];\n  }\n  for (const key in input) {\n    if ({}.hasOwnProperty.call(input, key)) {\n      if (!filter.includes(key)) {\n        output[key] = input[key];\n      }\n    }\n  }\n  return output;\n}\nfunction pick(input) {\n  if (!is.plainObject(input)) {\n    throw new TypeError(\"Expected an object\");\n  }\n  for (var _len2 = arguments.length, filter = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    filter[_key2 - 1] = arguments[_key2];\n  }\n  if (!filter.length) {\n    return input;\n  }\n  const output = {};\n  for (const key in input) {\n    if ({}.hasOwnProperty.call(input, key)) {\n      if (filter.includes(key)) {\n        output[key] = input[key];\n      }\n    }\n  }\n  return output;\n}\nfunction replaceLocaleContent(input, step, steps) {\n  const replacer = text => text.replace(\"{step}\", String(step)).replace(\"{steps}\", String(steps));\n  if (getObjectType(input) === \"string\") {\n    return replacer(input);\n  }\n  if (!isValidElement(input)) {\n    return input;\n  }\n  const {\n    children\n  } = input.props;\n  if (getObjectType(children) === \"string\" && children.includes(\"{step}\")) {\n    return cloneElement(input, {\n      children: replacer(children)\n    });\n  }\n  if (Array.isArray(children)) {\n    return cloneElement(input, {\n      children: children.map(child => {\n        if (typeof child === \"string\") {\n          return replacer(child);\n        }\n        return replaceLocaleContent(child, step, steps);\n      })\n    });\n  }\n  if (getObjectType(input.type) === \"function\" && !Object.values(input.props).length) {\n    const component = input.type({});\n    return replaceLocaleContent(component, step, steps);\n  }\n  return input;\n}\nfunction shouldScroll(options) {\n  const {\n    isFirstStep,\n    lifecycle,\n    previousLifecycle,\n    scrollToFirstStep,\n    step,\n    target\n  } = options;\n  return !step.disableScrolling && (!isFirstStep || scrollToFirstStep || lifecycle === LIFECYCLE.TOOLTIP) && step.placement !== \"center\" && (!step.isFixed || !hasPosition(target)) &&\n  // fixed steps don't need to scroll\n  previousLifecycle !== lifecycle && [LIFECYCLE.BEACON, LIFECYCLE.TOOLTIP].includes(lifecycle);\n}\n\n// src/modules/step.ts\nimport deepmerge2 from \"deepmerge\";\nimport is2 from \"is-lite\";\n\n// src/defaults.ts\nvar defaultFloaterProps = {\n  options: {\n    preventOverflow: {\n      boundariesElement: \"scrollParent\"\n    }\n  },\n  wrapperOptions: {\n    offset: -18,\n    position: true\n  }\n};\nvar defaultLocale = {\n  back: \"Back\",\n  close: \"Close\",\n  last: \"Last\",\n  next: \"Next\",\n  nextLabelWithProgress: \"Next (Step {step} of {steps})\",\n  open: \"Open the dialog\",\n  skip: \"Skip\"\n};\nvar defaultStep = {\n  event: \"click\",\n  placement: \"bottom\",\n  offset: 10,\n  disableBeacon: false,\n  disableCloseOnEsc: false,\n  disableOverlay: false,\n  disableOverlayClose: false,\n  disableScrollParentFix: false,\n  disableScrolling: false,\n  hideBackButton: false,\n  hideCloseButton: false,\n  hideFooter: false,\n  isFixed: false,\n  locale: defaultLocale,\n  showProgress: false,\n  showSkipButton: false,\n  spotlightClicks: false,\n  spotlightPadding: 10\n};\nvar defaultProps = {\n  continuous: false,\n  debug: false,\n  disableCloseOnEsc: false,\n  disableOverlay: false,\n  disableOverlayClose: false,\n  disableScrolling: false,\n  disableScrollParentFix: false,\n  getHelpers: noop(),\n  hideBackButton: false,\n  run: true,\n  scrollOffset: 20,\n  scrollDuration: 300,\n  scrollToFirstStep: false,\n  showSkipButton: false,\n  showProgress: false,\n  spotlightClicks: false,\n  spotlightPadding: 10,\n  steps: []\n};\n\n// src/styles.ts\nimport deepmerge from \"deepmerge\";\nvar defaultOptions = {\n  arrowColor: \"#fff\",\n  backgroundColor: \"#fff\",\n  beaconSize: 36,\n  overlayColor: \"rgba(0, 0, 0, 0.5)\",\n  primaryColor: \"#f04\",\n  spotlightShadow: \"0 0 15px rgba(0, 0, 0, 0.5)\",\n  textColor: \"#333\",\n  width: 380,\n  zIndex: 100\n};\nvar buttonBase = {\n  backgroundColor: \"transparent\",\n  border: 0,\n  borderRadius: 0,\n  color: \"#555\",\n  cursor: \"pointer\",\n  fontSize: 16,\n  lineHeight: 1,\n  padding: 8,\n  WebkitAppearance: \"none\"\n};\nvar spotlight = {\n  borderRadius: 4,\n  position: \"absolute\"\n};\nfunction getStyles(props, step) {\n  var _a, _b, _c, _d, _e;\n  const {\n    floaterProps,\n    styles\n  } = props;\n  const mergedFloaterProps = deepmerge((_a = step.floaterProps) != null ? _a : {}, floaterProps != null ? floaterProps : {});\n  const mergedStyles = deepmerge(styles != null ? styles : {}, (_b = step.styles) != null ? _b : {});\n  const options = deepmerge(defaultOptions, mergedStyles.options || {});\n  const hideBeacon2 = step.placement === \"center\" || step.disableBeacon;\n  let {\n    width\n  } = options;\n  if (window.innerWidth > 480) {\n    width = 380;\n  }\n  if (\"width\" in options) {\n    width = typeof options.width === \"number\" && window.innerWidth < options.width ? window.innerWidth - 30 : options.width;\n  }\n  const overlay = {\n    bottom: 0,\n    left: 0,\n    overflow: \"hidden\",\n    position: \"absolute\",\n    right: 0,\n    top: 0,\n    zIndex: options.zIndex\n  };\n  const defaultStyles = {\n    beacon: _objectSpread(_objectSpread({}, buttonBase), {}, {\n      display: hideBeacon2 ? \"none\" : \"inline-block\",\n      height: options.beaconSize,\n      position: \"relative\",\n      width: options.beaconSize,\n      zIndex: options.zIndex\n    }),\n    beaconInner: {\n      animation: \"joyride-beacon-inner 1.2s infinite ease-in-out\",\n      backgroundColor: options.primaryColor,\n      borderRadius: \"50%\",\n      display: \"block\",\n      height: \"50%\",\n      left: \"50%\",\n      opacity: 0.7,\n      position: \"absolute\",\n      top: \"50%\",\n      transform: \"translate(-50%, -50%)\",\n      width: \"50%\"\n    },\n    beaconOuter: {\n      animation: \"joyride-beacon-outer 1.2s infinite ease-in-out\",\n      backgroundColor: \"rgba(\".concat(hexToRGB(options.primaryColor).join(\",\"), \", 0.2)\"),\n      border: \"2px solid \".concat(options.primaryColor),\n      borderRadius: \"50%\",\n      boxSizing: \"border-box\",\n      display: \"block\",\n      height: \"100%\",\n      left: 0,\n      opacity: 0.9,\n      position: \"absolute\",\n      top: 0,\n      transformOrigin: \"center\",\n      width: \"100%\"\n    },\n    tooltip: {\n      backgroundColor: options.backgroundColor,\n      borderRadius: 5,\n      boxSizing: \"border-box\",\n      color: options.textColor,\n      fontSize: 16,\n      maxWidth: \"100%\",\n      padding: 15,\n      position: \"relative\",\n      width\n    },\n    tooltipContainer: {\n      lineHeight: 1.4,\n      textAlign: \"center\"\n    },\n    tooltipTitle: {\n      fontSize: 18,\n      margin: 0\n    },\n    tooltipContent: {\n      padding: \"20px 10px\"\n    },\n    tooltipFooter: {\n      alignItems: \"center\",\n      display: \"flex\",\n      justifyContent: \"flex-end\",\n      marginTop: 15\n    },\n    tooltipFooterSpacer: {\n      flex: 1\n    },\n    buttonNext: _objectSpread(_objectSpread({}, buttonBase), {}, {\n      backgroundColor: options.primaryColor,\n      borderRadius: 4,\n      color: \"#fff\"\n    }),\n    buttonBack: _objectSpread(_objectSpread({}, buttonBase), {}, {\n      color: options.primaryColor,\n      marginLeft: \"auto\",\n      marginRight: 5\n    }),\n    buttonClose: _objectSpread(_objectSpread({}, buttonBase), {}, {\n      color: options.textColor,\n      height: 14,\n      padding: 15,\n      position: \"absolute\",\n      right: 0,\n      top: 0,\n      width: 14\n    }),\n    buttonSkip: _objectSpread(_objectSpread({}, buttonBase), {}, {\n      color: options.textColor,\n      fontSize: 14\n    }),\n    overlay: _objectSpread(_objectSpread({}, overlay), {}, {\n      backgroundColor: options.overlayColor,\n      mixBlendMode: \"hard-light\"\n    }),\n    overlayLegacy: _objectSpread({}, overlay),\n    overlayLegacyCenter: _objectSpread(_objectSpread({}, overlay), {}, {\n      backgroundColor: options.overlayColor\n    }),\n    spotlight: _objectSpread(_objectSpread({}, spotlight), {}, {\n      backgroundColor: \"gray\"\n    }),\n    spotlightLegacy: _objectSpread(_objectSpread({}, spotlight), {}, {\n      boxShadow: \"0 0 0 9999px \".concat(options.overlayColor, \", \").concat(options.spotlightShadow)\n    }),\n    floaterStyles: {\n      arrow: {\n        color: (_e = (_d = (_c = mergedFloaterProps == null ? void 0 : mergedFloaterProps.styles) == null ? void 0 : _c.arrow) == null ? void 0 : _d.color) != null ? _e : options.arrowColor\n      },\n      options: {\n        zIndex: options.zIndex + 100\n      }\n    },\n    options\n  };\n  return deepmerge(defaultStyles, mergedStyles);\n}\n\n// src/modules/step.ts\nfunction getTourProps(props) {\n  return pick(props, \"beaconComponent\", \"disableCloseOnEsc\", \"disableOverlay\", \"disableOverlayClose\", \"disableScrolling\", \"disableScrollParentFix\", \"floaterProps\", \"hideBackButton\", \"hideCloseButton\", \"locale\", \"showProgress\", \"showSkipButton\", \"spotlightClicks\", \"spotlightPadding\", \"styles\", \"tooltipComponent\");\n}\nfunction getMergedStep(props, currentStep) {\n  var _a, _b, _c, _d, _e, _f;\n  const step = currentStep != null ? currentStep : {};\n  const mergedStep = deepmerge2.all([defaultStep, getTourProps(props), step], {\n    isMergeableObject: is2.plainObject\n  });\n  const mergedStyles = getStyles(props, mergedStep);\n  const scrollParent2 = hasCustomScrollParent(getElement(mergedStep.target), mergedStep.disableScrollParentFix);\n  const floaterProps = deepmerge2.all([defaultFloaterProps, (_a = props.floaterProps) != null ? _a : {}, (_b = mergedStep.floaterProps) != null ? _b : {}]);\n  floaterProps.offset = mergedStep.offset;\n  floaterProps.styles = deepmerge2((_c = floaterProps.styles) != null ? _c : {}, mergedStyles.floaterStyles);\n  floaterProps.offset += (_e = (_d = props.spotlightPadding) != null ? _d : mergedStep.spotlightPadding) != null ? _e : 0;\n  if (mergedStep.placementBeacon && floaterProps.wrapperOptions) {\n    floaterProps.wrapperOptions.placement = mergedStep.placementBeacon;\n  }\n  if (scrollParent2 && floaterProps.options.preventOverflow) {\n    floaterProps.options.preventOverflow.boundariesElement = \"window\";\n  }\n  return _objectSpread(_objectSpread({}, mergedStep), {}, {\n    locale: deepmerge2.all([defaultLocale, (_f = props.locale) != null ? _f : {}, mergedStep.locale || {}]),\n    floaterProps,\n    styles: omit(mergedStyles, \"floaterStyles\")\n  });\n}\nfunction validateStep(step) {\n  let debug = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  if (!is2.plainObject(step)) {\n    log({\n      title: \"validateStep\",\n      data: \"step must be an object\",\n      warn: true,\n      debug\n    });\n    return false;\n  }\n  if (!step.target) {\n    log({\n      title: \"validateStep\",\n      data: \"target is missing from the step\",\n      warn: true,\n      debug\n    });\n    return false;\n  }\n  return true;\n}\nfunction validateSteps(steps) {\n  let debug = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  if (!is2.array(steps)) {\n    log({\n      title: \"validateSteps\",\n      data: \"steps must be an array\",\n      warn: true,\n      debug\n    });\n    return false;\n  }\n  return steps.every(d => validateStep(d, debug));\n}\n\n// src/modules/store.ts\nimport is3 from \"is-lite\";\nvar defaultState = {\n  action: \"init\",\n  controlled: false,\n  index: 0,\n  lifecycle: LIFECYCLE.INIT,\n  origin: null,\n  size: 0,\n  status: STATUS.IDLE\n};\nvar validKeys = objectKeys(omit(defaultState, \"controlled\", \"size\"));\nvar Store = class {\n  constructor(options) {\n    var _this = this;\n    __publicField(this, \"beaconPopper\");\n    __publicField(this, \"tooltipPopper\");\n    __publicField(this, \"data\", /* @__PURE__ */new Map());\n    __publicField(this, \"listener\");\n    __publicField(this, \"store\", /* @__PURE__ */new Map());\n    __publicField(this, \"addListener\", listener => {\n      this.listener = listener;\n    });\n    __publicField(this, \"setSteps\", steps => {\n      const {\n        size,\n        status\n      } = this.getState();\n      const state = {\n        size: steps.length,\n        status\n      };\n      this.data.set(\"steps\", steps);\n      if (status === STATUS.WAITING && !size && steps.length) {\n        state.status = STATUS.RUNNING;\n      }\n      this.setState(state);\n    });\n    __publicField(this, \"getPopper\", name => {\n      if (name === \"beacon\") {\n        return this.beaconPopper;\n      }\n      return this.tooltipPopper;\n    });\n    __publicField(this, \"setPopper\", (name, popper) => {\n      if (name === \"beacon\") {\n        this.beaconPopper = popper;\n      } else {\n        this.tooltipPopper = popper;\n      }\n    });\n    __publicField(this, \"cleanupPoppers\", () => {\n      this.beaconPopper = null;\n      this.tooltipPopper = null;\n    });\n    __publicField(this, \"close\", function () {\n      let origin = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      const {\n        index,\n        status\n      } = _this.getState();\n      if (status !== STATUS.RUNNING) {\n        return;\n      }\n      _this.setState(_objectSpread({}, _this.getNextState({\n        action: ACTIONS.CLOSE,\n        index: index + 1,\n        origin\n      })));\n    });\n    __publicField(this, \"go\", nextIndex => {\n      const {\n        controlled,\n        status\n      } = this.getState();\n      if (controlled || status !== STATUS.RUNNING) {\n        return;\n      }\n      const step = this.getSteps()[nextIndex];\n      this.setState(_objectSpread(_objectSpread({}, this.getNextState({\n        action: ACTIONS.GO,\n        index: nextIndex\n      })), {}, {\n        status: step ? status : STATUS.FINISHED\n      }));\n    });\n    __publicField(this, \"info\", () => this.getState());\n    __publicField(this, \"next\", () => {\n      const {\n        index,\n        status\n      } = this.getState();\n      if (status !== STATUS.RUNNING) {\n        return;\n      }\n      this.setState(this.getNextState({\n        action: ACTIONS.NEXT,\n        index: index + 1\n      }));\n    });\n    __publicField(this, \"open\", () => {\n      const {\n        status\n      } = this.getState();\n      if (status !== STATUS.RUNNING) {\n        return;\n      }\n      this.setState(_objectSpread({}, this.getNextState({\n        action: ACTIONS.UPDATE,\n        lifecycle: LIFECYCLE.TOOLTIP\n      })));\n    });\n    __publicField(this, \"prev\", () => {\n      const {\n        index,\n        status\n      } = this.getState();\n      if (status !== STATUS.RUNNING) {\n        return;\n      }\n      this.setState(_objectSpread({}, this.getNextState({\n        action: ACTIONS.PREV,\n        index: index - 1\n      })));\n    });\n    __publicField(this, \"reset\", function () {\n      let restart = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      const {\n        controlled\n      } = _this.getState();\n      if (controlled) {\n        return;\n      }\n      _this.setState(_objectSpread(_objectSpread({}, _this.getNextState({\n        action: ACTIONS.RESET,\n        index: 0\n      })), {}, {\n        status: restart ? STATUS.RUNNING : STATUS.READY\n      }));\n    });\n    __publicField(this, \"skip\", () => {\n      const {\n        status\n      } = this.getState();\n      if (status !== STATUS.RUNNING) {\n        return;\n      }\n      this.setState({\n        action: ACTIONS.SKIP,\n        lifecycle: LIFECYCLE.INIT,\n        status: STATUS.SKIPPED\n      });\n    });\n    __publicField(this, \"start\", nextIndex => {\n      const {\n        index,\n        size\n      } = this.getState();\n      this.setState(_objectSpread(_objectSpread({}, this.getNextState({\n        action: ACTIONS.START,\n        index: is3.number(nextIndex) ? nextIndex : index\n      }, true)), {}, {\n        status: size ? STATUS.RUNNING : STATUS.WAITING\n      }));\n    });\n    __publicField(this, \"stop\", function () {\n      let advance = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      const {\n        index,\n        status\n      } = _this.getState();\n      if ([STATUS.FINISHED, STATUS.SKIPPED].includes(status)) {\n        return;\n      }\n      _this.setState(_objectSpread(_objectSpread({}, _this.getNextState({\n        action: ACTIONS.STOP,\n        index: index + (advance ? 1 : 0)\n      })), {}, {\n        status: STATUS.PAUSED\n      }));\n    });\n    __publicField(this, \"update\", state => {\n      var _a, _b;\n      if (!hasValidKeys(state, validKeys)) {\n        throw new Error(\"State is not valid. Valid keys: \".concat(validKeys.join(\", \")));\n      }\n      this.setState(_objectSpread({}, this.getNextState(_objectSpread(_objectSpread(_objectSpread({}, this.getState()), state), {}, {\n        action: (_a = state.action) != null ? _a : ACTIONS.UPDATE,\n        origin: (_b = state.origin) != null ? _b : null\n      }), true)));\n    });\n    const {\n      continuous = false,\n      stepIndex,\n      steps = []\n    } = options != null ? options : {};\n    this.setState({\n      action: ACTIONS.INIT,\n      controlled: is3.number(stepIndex),\n      continuous,\n      index: is3.number(stepIndex) ? stepIndex : 0,\n      lifecycle: LIFECYCLE.INIT,\n      origin: null,\n      status: steps.length ? STATUS.READY : STATUS.IDLE\n    }, true);\n    this.beaconPopper = null;\n    this.tooltipPopper = null;\n    this.listener = null;\n    this.setSteps(steps);\n  }\n  getState() {\n    if (!this.store.size) {\n      return _objectSpread({}, defaultState);\n    }\n    return {\n      action: this.store.get(\"action\") || \"\",\n      controlled: this.store.get(\"controlled\") || false,\n      index: parseInt(this.store.get(\"index\"), 10),\n      lifecycle: this.store.get(\"lifecycle\") || \"\",\n      origin: this.store.get(\"origin\") || null,\n      size: this.store.get(\"size\") || 0,\n      status: this.store.get(\"status\") || \"\"\n    };\n  }\n  getNextState(state) {\n    let force = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var _a, _b, _c, _d, _e;\n    const {\n      action,\n      controlled,\n      index,\n      size,\n      status\n    } = this.getState();\n    const newIndex = is3.number(state.index) ? state.index : index;\n    const nextIndex = controlled && !force ? index : Math.min(Math.max(newIndex, 0), size);\n    return {\n      action: (_a = state.action) != null ? _a : action,\n      controlled,\n      index: nextIndex,\n      lifecycle: (_b = state.lifecycle) != null ? _b : LIFECYCLE.INIT,\n      origin: (_c = state.origin) != null ? _c : null,\n      size: (_d = state.size) != null ? _d : size,\n      status: nextIndex === size ? STATUS.FINISHED : (_e = state.status) != null ? _e : status\n    };\n  }\n  getSteps() {\n    const steps = this.data.get(\"steps\");\n    return Array.isArray(steps) ? steps : [];\n  }\n  hasUpdatedState(oldState) {\n    const before = JSON.stringify(oldState);\n    const after = JSON.stringify(this.getState());\n    return before !== after;\n  }\n  setState(nextState) {\n    let initial = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    const state = this.getState();\n    const {\n      action,\n      index,\n      lifecycle,\n      origin = null,\n      size,\n      status\n    } = _objectSpread(_objectSpread({}, state), nextState);\n    this.store.set(\"action\", action);\n    this.store.set(\"index\", index);\n    this.store.set(\"lifecycle\", lifecycle);\n    this.store.set(\"origin\", origin);\n    this.store.set(\"size\", size);\n    this.store.set(\"status\", status);\n    if (initial) {\n      this.store.set(\"controlled\", nextState.controlled);\n      this.store.set(\"continuous\", nextState.continuous);\n    }\n    if (this.listener && this.hasUpdatedState(state)) {\n      this.listener(this.getState());\n    }\n  }\n  getHelpers() {\n    return {\n      close: this.close,\n      go: this.go,\n      info: this.info,\n      next: this.next,\n      open: this.open,\n      prev: this.prev,\n      reset: this.reset,\n      skip: this.skip\n    };\n  }\n};\nfunction createStore(options) {\n  return new Store(options);\n}\n\n// src/components/Overlay.tsx\nimport * as React2 from \"react\";\nimport treeChanges from \"tree-changes\";\n\n// src/components/Spotlight.tsx\nimport * as React from \"react\";\nfunction JoyrideSpotlight(_ref2) {\n  let {\n    styles\n  } = _ref2;\n  return /* @__PURE__ */React.createElement(\"div\", {\n    key: \"JoyrideSpotlight\",\n    className: \"react-joyride__spotlight\",\n    \"data-test-id\": \"spotlight\",\n    style: styles\n  });\n}\nvar Spotlight_default = JoyrideSpotlight;\n\n// src/components/Overlay.tsx\nvar JoyrideOverlay = class extends React2.Component {\n  constructor() {\n    super(...arguments);\n    __publicField(this, \"isActive\", false);\n    __publicField(this, \"resizeTimeout\");\n    __publicField(this, \"scrollTimeout\");\n    __publicField(this, \"scrollParent\");\n    __publicField(this, \"state\", {\n      isScrolling: false,\n      mouseOverSpotlight: false,\n      showSpotlight: true\n    });\n    __publicField(this, \"hideSpotlight\", () => {\n      const {\n        continuous,\n        disableOverlay,\n        lifecycle\n      } = this.props;\n      const hiddenLifecycles = [LIFECYCLE.INIT, LIFECYCLE.BEACON, LIFECYCLE.COMPLETE, LIFECYCLE.ERROR];\n      return disableOverlay || (continuous ? hiddenLifecycles.includes(lifecycle) : lifecycle !== LIFECYCLE.TOOLTIP);\n    });\n    __publicField(this, \"handleMouseMove\", event => {\n      const {\n        mouseOverSpotlight\n      } = this.state;\n      const {\n        height,\n        left,\n        position,\n        top,\n        width\n      } = this.spotlightStyles;\n      const offsetY = position === \"fixed\" ? event.clientY : event.pageY;\n      const offsetX = position === \"fixed\" ? event.clientX : event.pageX;\n      const inSpotlightHeight = offsetY >= top && offsetY <= top + height;\n      const inSpotlightWidth = offsetX >= left && offsetX <= left + width;\n      const inSpotlight = inSpotlightWidth && inSpotlightHeight;\n      if (inSpotlight !== mouseOverSpotlight) {\n        this.updateState({\n          mouseOverSpotlight: inSpotlight\n        });\n      }\n    });\n    __publicField(this, \"handleScroll\", () => {\n      const {\n        target\n      } = this.props;\n      const element = getElement(target);\n      if (this.scrollParent !== document) {\n        const {\n          isScrolling\n        } = this.state;\n        if (!isScrolling) {\n          this.updateState({\n            isScrolling: true,\n            showSpotlight: false\n          });\n        }\n        clearTimeout(this.scrollTimeout);\n        this.scrollTimeout = window.setTimeout(() => {\n          this.updateState({\n            isScrolling: false,\n            showSpotlight: true\n          });\n        }, 50);\n      } else if (hasPosition(element, \"sticky\")) {\n        this.updateState({});\n      }\n    });\n    __publicField(this, \"handleResize\", () => {\n      clearTimeout(this.resizeTimeout);\n      this.resizeTimeout = window.setTimeout(() => {\n        if (!this.isActive) {\n          return;\n        }\n        this.forceUpdate();\n      }, 100);\n    });\n  }\n  componentDidMount() {\n    const {\n      debug,\n      disableScrolling,\n      disableScrollParentFix = false,\n      target\n    } = this.props;\n    const element = getElement(target);\n    this.scrollParent = getScrollParent(element != null ? element : document.body, disableScrollParentFix, true);\n    this.isActive = true;\n    if (process.env.NODE_ENV !== \"production\") {\n      if (!disableScrolling && hasCustomScrollParent(element, true)) {\n        log({\n          title: \"step has a custom scroll parent and can cause trouble with scrolling\",\n          data: [{\n            key: \"parent\",\n            value: this.scrollParent\n          }],\n          debug\n        });\n      }\n    }\n    window.addEventListener(\"resize\", this.handleResize);\n  }\n  componentDidUpdate(previousProps) {\n    var _a;\n    const {\n      disableScrollParentFix,\n      lifecycle,\n      spotlightClicks,\n      target\n    } = this.props;\n    const {\n      changed\n    } = treeChanges(previousProps, this.props);\n    if (changed(\"target\") || changed(\"disableScrollParentFix\")) {\n      const element = getElement(target);\n      this.scrollParent = getScrollParent(element != null ? element : document.body, disableScrollParentFix, true);\n    }\n    if (changed(\"lifecycle\", LIFECYCLE.TOOLTIP)) {\n      (_a = this.scrollParent) == null ? void 0 : _a.addEventListener(\"scroll\", this.handleScroll, {\n        passive: true\n      });\n      setTimeout(() => {\n        const {\n          isScrolling\n        } = this.state;\n        if (!isScrolling) {\n          this.updateState({\n            showSpotlight: true\n          });\n        }\n      }, 100);\n    }\n    if (changed(\"spotlightClicks\") || changed(\"disableOverlay\") || changed(\"lifecycle\")) {\n      if (spotlightClicks && lifecycle === LIFECYCLE.TOOLTIP) {\n        window.addEventListener(\"mousemove\", this.handleMouseMove, false);\n      } else if (lifecycle !== LIFECYCLE.TOOLTIP) {\n        window.removeEventListener(\"mousemove\", this.handleMouseMove);\n      }\n    }\n  }\n  componentWillUnmount() {\n    var _a;\n    this.isActive = false;\n    window.removeEventListener(\"mousemove\", this.handleMouseMove);\n    window.removeEventListener(\"resize\", this.handleResize);\n    clearTimeout(this.resizeTimeout);\n    clearTimeout(this.scrollTimeout);\n    (_a = this.scrollParent) == null ? void 0 : _a.removeEventListener(\"scroll\", this.handleScroll);\n  }\n  get overlayStyles() {\n    const {\n      mouseOverSpotlight\n    } = this.state;\n    const {\n      disableOverlayClose,\n      placement,\n      styles\n    } = this.props;\n    let baseStyles = styles.overlay;\n    if (isLegacy()) {\n      baseStyles = placement === \"center\" ? styles.overlayLegacyCenter : styles.overlayLegacy;\n    }\n    return _objectSpread({\n      cursor: disableOverlayClose ? \"default\" : \"pointer\",\n      height: getDocumentHeight(),\n      pointerEvents: mouseOverSpotlight ? \"none\" : \"auto\"\n    }, baseStyles);\n  }\n  get spotlightStyles() {\n    var _a, _b, _c;\n    const {\n      showSpotlight\n    } = this.state;\n    const {\n      disableScrollParentFix = false,\n      spotlightClicks,\n      spotlightPadding = 0,\n      styles,\n      target\n    } = this.props;\n    const element = getElement(target);\n    const elementRect = getClientRect(element);\n    const isFixedTarget = hasPosition(element);\n    const top = getElementPosition(element, spotlightPadding, disableScrollParentFix);\n    return _objectSpread(_objectSpread({}, isLegacy() ? styles.spotlightLegacy : styles.spotlight), {}, {\n      height: Math.round(((_a = elementRect == null ? void 0 : elementRect.height) != null ? _a : 0) + spotlightPadding * 2),\n      left: Math.round(((_b = elementRect == null ? void 0 : elementRect.left) != null ? _b : 0) - spotlightPadding),\n      opacity: showSpotlight ? 1 : 0,\n      pointerEvents: spotlightClicks ? \"none\" : \"auto\",\n      position: isFixedTarget ? \"fixed\" : \"absolute\",\n      top,\n      transition: \"opacity 0.2s\",\n      width: Math.round(((_c = elementRect == null ? void 0 : elementRect.width) != null ? _c : 0) + spotlightPadding * 2)\n    });\n  }\n  updateState(state) {\n    if (!this.isActive) {\n      return;\n    }\n    this.setState(previousState => _objectSpread(_objectSpread({}, previousState), state));\n  }\n  render() {\n    const {\n      showSpotlight\n    } = this.state;\n    const {\n      onClickOverlay,\n      placement\n    } = this.props;\n    const {\n      hideSpotlight,\n      overlayStyles,\n      spotlightStyles\n    } = this;\n    if (hideSpotlight()) {\n      return null;\n    }\n    let spotlight2 = placement !== \"center\" && showSpotlight && /* @__PURE__ */React2.createElement(Spotlight_default, {\n      styles: spotlightStyles\n    });\n    if (getBrowser() === \"safari\") {\n      const {\n          mixBlendMode,\n          zIndex\n        } = overlayStyles,\n        safariOverlay = _objectWithoutProperties(overlayStyles, _excluded);\n      spotlight2 = /* @__PURE__ */React2.createElement(\"div\", {\n        style: _objectSpread({}, safariOverlay)\n      }, spotlight2);\n      delete overlayStyles.backgroundColor;\n    }\n    return /* @__PURE__ */React2.createElement(\"div\", {\n      className: \"react-joyride__overlay\",\n      \"data-test-id\": \"overlay\",\n      onClick: onClickOverlay,\n      role: \"presentation\",\n      style: overlayStyles\n    }, spotlight2);\n  }\n};\n\n// src/components/Portal.tsx\nimport * as React3 from \"react\";\nimport * as ReactDOM from \"react-dom\";\nvar JoyridePortal = class extends React3.Component {\n  constructor() {\n    super(...arguments);\n    __publicField(this, \"node\", null);\n  }\n  componentDidMount() {\n    const {\n      id\n    } = this.props;\n    if (!canUseDOM()) {\n      return;\n    }\n    this.node = document.createElement(\"div\");\n    this.node.id = id;\n    document.body.appendChild(this.node);\n    if (!isReact16) {\n      this.renderReact15();\n    }\n  }\n  componentDidUpdate() {\n    if (!canUseDOM()) {\n      return;\n    }\n    if (!isReact16) {\n      this.renderReact15();\n    }\n  }\n  componentWillUnmount() {\n    if (!canUseDOM() || !this.node) {\n      return;\n    }\n    if (!isReact16) {\n      ReactDOM.unmountComponentAtNode(this.node);\n    }\n    if (this.node.parentNode === document.body) {\n      document.body.removeChild(this.node);\n      this.node = null;\n    }\n  }\n  renderReact15() {\n    if (!canUseDOM()) {\n      return;\n    }\n    const {\n      children\n    } = this.props;\n    if (this.node) {\n      ReactDOM.unstable_renderSubtreeIntoContainer(this, children, this.node);\n    }\n  }\n  renderReact16() {\n    if (!canUseDOM() || !isReact16) {\n      return null;\n    }\n    const {\n      children\n    } = this.props;\n    if (!this.node) {\n      return null;\n    }\n    return ReactDOM.createPortal(children, this.node);\n  }\n  render() {\n    if (!isReact16) {\n      return null;\n    }\n    return this.renderReact16();\n  }\n};\n\n// src/components/Step.tsx\nimport * as React8 from \"react\";\nimport Floater from \"react-floater\";\nimport is5 from \"is-lite\";\nimport treeChanges2 from \"tree-changes\";\n\n// src/modules/scope.ts\nvar Scope = class {\n  constructor(element, options) {\n    __publicField(this, \"element\");\n    __publicField(this, \"options\");\n    __publicField(this, \"canBeTabbed\", element => {\n      const {\n        tabIndex\n      } = element;\n      if (tabIndex === null || tabIndex < 0) {\n        return false;\n      }\n      return this.canHaveFocus(element);\n    });\n    __publicField(this, \"canHaveFocus\", element => {\n      const validTabNodes = /input|select|textarea|button|object/;\n      const nodeName = element.nodeName.toLowerCase();\n      const isValid = validTabNodes.test(nodeName) && !element.getAttribute(\"disabled\") || nodeName === \"a\" && !!element.getAttribute(\"href\");\n      return isValid && this.isVisible(element);\n    });\n    __publicField(this, \"findValidTabElements\", () => [].slice.call(this.element.querySelectorAll(\"*\"), 0).filter(this.canBeTabbed));\n    __publicField(this, \"handleKeyDown\", event => {\n      const {\n        code = \"Tab\"\n      } = this.options;\n      if (event.code === code) {\n        this.interceptTab(event);\n      }\n    });\n    __publicField(this, \"interceptTab\", event => {\n      event.preventDefault();\n      const elements = this.findValidTabElements();\n      const {\n        shiftKey\n      } = event;\n      if (!elements.length) {\n        return;\n      }\n      let x = document.activeElement ? elements.indexOf(document.activeElement) : 0;\n      if (x === -1 || !shiftKey && x + 1 === elements.length) {\n        x = 0;\n      } else if (shiftKey && x === 0) {\n        x = elements.length - 1;\n      } else {\n        x += shiftKey ? -1 : 1;\n      }\n      elements[x].focus();\n    });\n    // eslint-disable-next-line class-methods-use-this\n    __publicField(this, \"isHidden\", element => {\n      const noSize = element.offsetWidth <= 0 && element.offsetHeight <= 0;\n      const style = window.getComputedStyle(element);\n      if (noSize && !element.innerHTML) {\n        return true;\n      }\n      return noSize && style.getPropertyValue(\"overflow\") !== \"visible\" || style.getPropertyValue(\"display\") === \"none\";\n    });\n    __publicField(this, \"isVisible\", element => {\n      let parentElement = element;\n      while (parentElement) {\n        if (parentElement instanceof HTMLElement) {\n          if (parentElement === document.body) {\n            break;\n          }\n          if (this.isHidden(parentElement)) {\n            return false;\n          }\n          parentElement = parentElement.parentNode;\n        }\n      }\n      return true;\n    });\n    __publicField(this, \"removeScope\", () => {\n      window.removeEventListener(\"keydown\", this.handleKeyDown);\n    });\n    __publicField(this, \"checkFocus\", target => {\n      if (document.activeElement !== target) {\n        target.focus();\n        window.requestAnimationFrame(() => this.checkFocus(target));\n      }\n    });\n    __publicField(this, \"setFocus\", () => {\n      const {\n        selector\n      } = this.options;\n      if (!selector) {\n        return;\n      }\n      const target = this.element.querySelector(selector);\n      if (target) {\n        window.requestAnimationFrame(() => this.checkFocus(target));\n      }\n    });\n    if (!(element instanceof HTMLElement)) {\n      throw new TypeError(\"Invalid parameter: element must be an HTMLElement\");\n    }\n    this.element = element;\n    this.options = options;\n    window.addEventListener(\"keydown\", this.handleKeyDown, false);\n    this.setFocus();\n  }\n};\n\n// src/components/Beacon.tsx\nimport * as React4 from \"react\";\nimport is4 from \"is-lite\";\nvar JoyrideBeacon = class extends React4.Component {\n  constructor(props) {\n    super(props);\n    __publicField(this, \"beacon\", null);\n    __publicField(this, \"setBeaconRef\", c => {\n      this.beacon = c;\n    });\n    if (props.beaconComponent) {\n      return;\n    }\n    const head = document.head || document.getElementsByTagName(\"head\")[0];\n    const style = document.createElement(\"style\");\n    style.id = \"joyride-beacon-animation\";\n    if (props.nonce) {\n      style.setAttribute(\"nonce\", props.nonce);\n    }\n    const css = \"\\n        @keyframes joyride-beacon-inner {\\n          20% {\\n            opacity: 0.9;\\n          }\\n        \\n          90% {\\n            opacity: 0.7;\\n          }\\n        }\\n        \\n        @keyframes joyride-beacon-outer {\\n          0% {\\n            transform: scale(1);\\n          }\\n        \\n          45% {\\n            opacity: 0.7;\\n            transform: scale(0.75);\\n          }\\n        \\n          100% {\\n            opacity: 0.9;\\n            transform: scale(1);\\n          }\\n        }\\n      \";\n    style.appendChild(document.createTextNode(css));\n    head.appendChild(style);\n  }\n  componentDidMount() {\n    const {\n      shouldFocus\n    } = this.props;\n    if (process.env.NODE_ENV !== \"production\") {\n      if (!is4.domElement(this.beacon)) {\n        console.warn(\"beacon is not a valid DOM element\");\n      }\n    }\n    setTimeout(() => {\n      if (is4.domElement(this.beacon) && shouldFocus) {\n        this.beacon.focus();\n      }\n    }, 0);\n  }\n  componentWillUnmount() {\n    const style = document.getElementById(\"joyride-beacon-animation\");\n    if (style == null ? void 0 : style.parentNode) {\n      style.parentNode.removeChild(style);\n    }\n  }\n  render() {\n    const {\n      beaconComponent,\n      continuous,\n      index,\n      isLastStep,\n      locale,\n      onClickOrHover,\n      size,\n      step,\n      styles\n    } = this.props;\n    const title = getReactNodeText(locale.open);\n    const sharedProps = {\n      \"aria-label\": title,\n      onClick: onClickOrHover,\n      onMouseEnter: onClickOrHover,\n      ref: this.setBeaconRef,\n      title\n    };\n    let component;\n    if (beaconComponent) {\n      const BeaconComponent = beaconComponent;\n      component = /* @__PURE__ */React4.createElement(BeaconComponent, _objectSpread({\n        continuous,\n        index,\n        isLastStep,\n        size,\n        step\n      }, sharedProps));\n    } else {\n      component = /* @__PURE__ */React4.createElement(\"button\", _objectSpread({\n        key: \"JoyrideBeacon\",\n        className: \"react-joyride__beacon\",\n        \"data-test-id\": \"button-beacon\",\n        style: styles.beacon,\n        type: \"button\"\n      }, sharedProps), /* @__PURE__ */React4.createElement(\"span\", {\n        style: styles.beaconInner\n      }), /* @__PURE__ */React4.createElement(\"span\", {\n        style: styles.beaconOuter\n      }));\n    }\n    return component;\n  }\n};\n\n// src/components/Tooltip/index.tsx\nimport * as React7 from \"react\";\n\n// src/components/Tooltip/Container.tsx\nimport * as React6 from \"react\";\n\n// src/components/Tooltip/CloseButton.tsx\nimport React5 from \"react\";\nfunction JoyrideTooltipCloseButton(_ref3) {\n  let {\n      styles\n    } = _ref3,\n    props = _objectWithoutProperties(_ref3, _excluded2);\n  const {\n      color,\n      height,\n      width\n    } = styles,\n    style = _objectWithoutProperties(styles, _excluded3);\n  return /* @__PURE__ */React5.createElement(\"button\", _objectSpread({\n    style,\n    type: \"button\"\n  }, props), /* @__PURE__ */React5.createElement(\"svg\", {\n    height: typeof height === \"number\" ? \"\".concat(height, \"px\") : height,\n    preserveAspectRatio: \"xMidYMid\",\n    version: \"1.1\",\n    viewBox: \"0 0 18 18\",\n    width: typeof width === \"number\" ? \"\".concat(width, \"px\") : width,\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /* @__PURE__ */React5.createElement(\"g\", null, /* @__PURE__ */React5.createElement(\"path\", {\n    d: \"M8.13911129,9.00268191 L0.171521827,17.0258467 C-0.0498027049,17.248715 -0.0498027049,17.6098394 0.171521827,17.8327545 C0.28204354,17.9443526 0.427188206,17.9998706 0.572051765,17.9998706 C0.71714958,17.9998706 0.862013139,17.9443526 0.972581703,17.8327545 L9.0000937,9.74924618 L17.0276057,17.8327545 C17.1384085,17.9443526 17.2832721,17.9998706 17.4281356,17.9998706 C17.5729992,17.9998706 17.718097,17.9443526 17.8286656,17.8327545 C18.0499901,17.6098862 18.0499901,17.2487618 17.8286656,17.0258467 L9.86135722,9.00268191 L17.8340066,0.973848225 C18.0553311,0.750979934 18.0553311,0.389855532 17.8340066,0.16694039 C17.6126821,-0.0556467968 17.254037,-0.0556467968 17.0329467,0.16694039 L9.00042166,8.25611765 L0.967006424,0.167268345 C0.745681892,-0.0553188426 0.387317931,-0.0553188426 0.165993399,0.167268345 C-0.0553311331,0.390136635 -0.0553311331,0.751261038 0.165993399,0.974176179 L8.13920499,9.00268191 L8.13911129,9.00268191 Z\",\n    fill: color\n  }))));\n}\nvar CloseButton_default = JoyrideTooltipCloseButton;\n\n// src/components/Tooltip/Container.tsx\nfunction JoyrideTooltipContainer(props) {\n  const {\n    backProps,\n    closeProps,\n    index,\n    isLastStep,\n    primaryProps,\n    skipProps,\n    step,\n    tooltipProps\n  } = props;\n  const {\n    content,\n    hideBackButton,\n    hideCloseButton,\n    hideFooter,\n    showSkipButton,\n    styles,\n    title\n  } = step;\n  const output = {};\n  output.primary = /* @__PURE__ */React6.createElement(\"button\", _objectSpread({\n    \"data-test-id\": \"button-primary\",\n    style: styles.buttonNext,\n    type: \"button\"\n  }, primaryProps));\n  if (showSkipButton && !isLastStep) {\n    output.skip = /* @__PURE__ */React6.createElement(\"button\", _objectSpread({\n      \"aria-live\": \"off\",\n      \"data-test-id\": \"button-skip\",\n      style: styles.buttonSkip,\n      type: \"button\"\n    }, skipProps));\n  }\n  if (!hideBackButton && index > 0) {\n    output.back = /* @__PURE__ */React6.createElement(\"button\", _objectSpread({\n      \"data-test-id\": \"button-back\",\n      style: styles.buttonBack,\n      type: \"button\"\n    }, backProps));\n  }\n  output.close = !hideCloseButton && /* @__PURE__ */React6.createElement(CloseButton_default, _objectSpread({\n    \"data-test-id\": \"button-close\",\n    styles: styles.buttonClose\n  }, closeProps));\n  return /* @__PURE__ */React6.createElement(\"div\", _objectSpread({\n    key: \"JoyrideTooltip\",\n    \"aria-label\": getReactNodeText(title != null ? title : content),\n    className: \"react-joyride__tooltip\",\n    style: styles.tooltip\n  }, tooltipProps), /* @__PURE__ */React6.createElement(\"div\", {\n    style: styles.tooltipContainer\n  }, title && /* @__PURE__ */React6.createElement(\"h1\", {\n    \"aria-label\": getReactNodeText(title),\n    style: styles.tooltipTitle\n  }, title), /* @__PURE__ */React6.createElement(\"div\", {\n    style: styles.tooltipContent\n  }, content)), !hideFooter && /* @__PURE__ */React6.createElement(\"div\", {\n    style: styles.tooltipFooter\n  }, /* @__PURE__ */React6.createElement(\"div\", {\n    style: styles.tooltipFooterSpacer\n  }, output.skip), output.back, output.primary), output.close);\n}\nvar Container_default = JoyrideTooltipContainer;\n\n// src/components/Tooltip/index.tsx\nvar JoyrideTooltip = class extends React7.Component {\n  constructor() {\n    super(...arguments);\n    __publicField(this, \"handleClickBack\", event => {\n      event.preventDefault();\n      const {\n        helpers\n      } = this.props;\n      helpers.prev();\n    });\n    __publicField(this, \"handleClickClose\", event => {\n      event.preventDefault();\n      const {\n        helpers\n      } = this.props;\n      helpers.close(\"button_close\");\n    });\n    __publicField(this, \"handleClickPrimary\", event => {\n      event.preventDefault();\n      const {\n        continuous,\n        helpers\n      } = this.props;\n      if (!continuous) {\n        helpers.close(\"button_primary\");\n        return;\n      }\n      helpers.next();\n    });\n    __publicField(this, \"handleClickSkip\", event => {\n      event.preventDefault();\n      const {\n        helpers\n      } = this.props;\n      helpers.skip();\n    });\n    __publicField(this, \"getElementsProps\", () => {\n      const {\n        continuous,\n        index,\n        isLastStep,\n        setTooltipRef,\n        size,\n        step\n      } = this.props;\n      const {\n        back,\n        close,\n        last,\n        next,\n        nextLabelWithProgress,\n        skip\n      } = step.locale;\n      const backText = getReactNodeText(back);\n      const closeText = getReactNodeText(close);\n      const lastText = getReactNodeText(last);\n      const nextText = getReactNodeText(next);\n      const skipText = getReactNodeText(skip);\n      let primary = close;\n      let primaryText = closeText;\n      if (continuous) {\n        primary = next;\n        primaryText = nextText;\n        if (step.showProgress && !isLastStep) {\n          const labelWithProgress = getReactNodeText(nextLabelWithProgress, {\n            step: index + 1,\n            steps: size\n          });\n          primary = replaceLocaleContent(nextLabelWithProgress, index + 1, size);\n          primaryText = labelWithProgress;\n        }\n        if (isLastStep) {\n          primary = last;\n          primaryText = lastText;\n        }\n      }\n      return {\n        backProps: {\n          \"aria-label\": backText,\n          children: back,\n          \"data-action\": \"back\",\n          onClick: this.handleClickBack,\n          role: \"button\",\n          title: backText\n        },\n        closeProps: {\n          \"aria-label\": closeText,\n          children: close,\n          \"data-action\": \"close\",\n          onClick: this.handleClickClose,\n          role: \"button\",\n          title: closeText\n        },\n        primaryProps: {\n          \"aria-label\": primaryText,\n          children: primary,\n          \"data-action\": \"primary\",\n          onClick: this.handleClickPrimary,\n          role: \"button\",\n          title: primaryText\n        },\n        skipProps: {\n          \"aria-label\": skipText,\n          children: skip,\n          \"data-action\": \"skip\",\n          onClick: this.handleClickSkip,\n          role: \"button\",\n          title: skipText\n        },\n        tooltipProps: {\n          \"aria-modal\": true,\n          ref: setTooltipRef,\n          role: \"alertdialog\"\n        }\n      };\n    });\n  }\n  render() {\n    const {\n      continuous,\n      index,\n      isLastStep,\n      setTooltipRef,\n      size,\n      step\n    } = this.props;\n    const {\n        beaconComponent,\n        tooltipComponent\n      } = step,\n      cleanStep = _objectWithoutProperties(step, _excluded4);\n    let component;\n    if (tooltipComponent) {\n      const renderProps = _objectSpread(_objectSpread({}, this.getElementsProps()), {}, {\n        continuous,\n        index,\n        isLastStep,\n        size,\n        step: cleanStep,\n        setTooltipRef\n      });\n      const TooltipComponent = tooltipComponent;\n      component = /* @__PURE__ */React7.createElement(TooltipComponent, _objectSpread({}, renderProps));\n    } else {\n      component = /* @__PURE__ */React7.createElement(Container_default, _objectSpread(_objectSpread({}, this.getElementsProps()), {}, {\n        continuous,\n        index,\n        isLastStep,\n        size,\n        step\n      }));\n    }\n    return component;\n  }\n};\n\n// src/components/Step.tsx\nvar JoyrideStep = class extends React8.Component {\n  constructor() {\n    super(...arguments);\n    __publicField(this, \"scope\", null);\n    __publicField(this, \"tooltip\", null);\n    /**\n     * Beacon click/hover event listener\n     */\n    __publicField(this, \"handleClickHoverBeacon\", event => {\n      const {\n        step,\n        store\n      } = this.props;\n      if (event.type === \"mouseenter\" && step.event !== \"hover\") {\n        return;\n      }\n      store.update({\n        lifecycle: LIFECYCLE.TOOLTIP\n      });\n    });\n    __publicField(this, \"setTooltipRef\", element => {\n      this.tooltip = element;\n    });\n    __publicField(this, \"setPopper\", (popper, type) => {\n      var _a;\n      const {\n        action,\n        lifecycle,\n        step,\n        store\n      } = this.props;\n      if (type === \"wrapper\") {\n        store.setPopper(\"beacon\", popper);\n      } else {\n        store.setPopper(\"tooltip\", popper);\n      }\n      if (store.getPopper(\"beacon\") && (store.getPopper(\"tooltip\") || step.placement === \"center\") && lifecycle === LIFECYCLE.INIT) {\n        store.update({\n          action,\n          lifecycle: LIFECYCLE.READY\n        });\n      }\n      if ((_a = step.floaterProps) == null ? void 0 : _a.getPopper) {\n        step.floaterProps.getPopper(popper, type);\n      }\n    });\n    __publicField(this, \"renderTooltip\", renderProps => {\n      const {\n        continuous,\n        helpers,\n        index,\n        size,\n        step\n      } = this.props;\n      return /* @__PURE__ */React8.createElement(JoyrideTooltip, _objectSpread({\n        continuous,\n        helpers,\n        index,\n        isLastStep: index + 1 === size,\n        setTooltipRef: this.setTooltipRef,\n        size,\n        step\n      }, renderProps));\n    });\n  }\n  componentDidMount() {\n    const {\n      debug,\n      index\n    } = this.props;\n    log({\n      title: \"step:\".concat(index),\n      data: [{\n        key: \"props\",\n        value: this.props\n      }],\n      debug\n    });\n  }\n  componentDidUpdate(previousProps) {\n    var _a;\n    const {\n      action,\n      callback,\n      continuous,\n      controlled,\n      debug,\n      helpers,\n      index,\n      lifecycle,\n      shouldScroll: shouldScroll2,\n      status,\n      step,\n      store\n    } = this.props;\n    const {\n      changed,\n      changedFrom\n    } = treeChanges2(previousProps, this.props);\n    const state = helpers.info();\n    const skipBeacon = continuous && action !== ACTIONS.CLOSE && (index > 0 || action === ACTIONS.PREV);\n    const hasStoreChanged = changed(\"action\") || changed(\"index\") || changed(\"lifecycle\") || changed(\"status\");\n    const isInitial = changedFrom(\"lifecycle\", [LIFECYCLE.TOOLTIP, LIFECYCLE.INIT], LIFECYCLE.INIT);\n    const isAfterAction = changed(\"action\", [ACTIONS.NEXT, ACTIONS.PREV, ACTIONS.SKIP, ACTIONS.CLOSE]);\n    const isControlled = controlled && index === previousProps.index;\n    if (isAfterAction && (isInitial || isControlled)) {\n      callback(_objectSpread(_objectSpread({}, state), {}, {\n        index: previousProps.index,\n        lifecycle: LIFECYCLE.COMPLETE,\n        step: previousProps.step,\n        type: EVENTS.STEP_AFTER\n      }));\n    }\n    if (step.placement === \"center\" && status === STATUS.RUNNING && changed(\"index\") && action !== ACTIONS.START && lifecycle === LIFECYCLE.INIT) {\n      store.update({\n        lifecycle: LIFECYCLE.READY\n      });\n    }\n    if (hasStoreChanged) {\n      const element = getElement(step.target);\n      const elementExists = !!element;\n      const hasRenderedTarget = elementExists && isElementVisible(element);\n      if (hasRenderedTarget) {\n        if (changedFrom(\"status\", STATUS.READY, STATUS.RUNNING) || changedFrom(\"lifecycle\", LIFECYCLE.INIT, LIFECYCLE.READY)) {\n          callback(_objectSpread(_objectSpread({}, state), {}, {\n            step,\n            type: EVENTS.STEP_BEFORE\n          }));\n        }\n      } else {\n        console.warn(elementExists ? \"Target not visible\" : \"Target not mounted\", step);\n        callback(_objectSpread(_objectSpread({}, state), {}, {\n          type: EVENTS.TARGET_NOT_FOUND,\n          step\n        }));\n        if (!controlled) {\n          store.update({\n            index: index + (action === ACTIONS.PREV ? -1 : 1)\n          });\n        }\n      }\n    }\n    if (changedFrom(\"lifecycle\", LIFECYCLE.INIT, LIFECYCLE.READY)) {\n      store.update({\n        lifecycle: hideBeacon(step) || skipBeacon ? LIFECYCLE.TOOLTIP : LIFECYCLE.BEACON\n      });\n    }\n    if (changed(\"index\")) {\n      log({\n        title: \"step:\".concat(lifecycle),\n        data: [{\n          key: \"props\",\n          value: this.props\n        }],\n        debug\n      });\n    }\n    if (changed(\"lifecycle\", LIFECYCLE.BEACON)) {\n      callback(_objectSpread(_objectSpread({}, state), {}, {\n        step,\n        type: EVENTS.BEACON\n      }));\n    }\n    if (changed(\"lifecycle\", LIFECYCLE.TOOLTIP)) {\n      callback(_objectSpread(_objectSpread({}, state), {}, {\n        step,\n        type: EVENTS.TOOLTIP\n      }));\n      if (shouldScroll2 && this.tooltip) {\n        this.scope = new Scope(this.tooltip, {\n          selector: \"[data-action=primary]\"\n        });\n        this.scope.setFocus();\n      }\n    }\n    if (changedFrom(\"lifecycle\", [LIFECYCLE.TOOLTIP, LIFECYCLE.INIT], LIFECYCLE.INIT)) {\n      (_a = this.scope) == null ? void 0 : _a.removeScope();\n      store.cleanupPoppers();\n    }\n  }\n  componentWillUnmount() {\n    var _a;\n    (_a = this.scope) == null ? void 0 : _a.removeScope();\n  }\n  get open() {\n    const {\n      lifecycle,\n      step\n    } = this.props;\n    return hideBeacon(step) || lifecycle === LIFECYCLE.TOOLTIP;\n  }\n  render() {\n    const {\n      continuous,\n      debug,\n      index,\n      nonce,\n      shouldScroll: shouldScroll2,\n      size,\n      step\n    } = this.props;\n    const target = getElement(step.target);\n    if (!validateStep(step) || !is5.domElement(target)) {\n      return null;\n    }\n    return /* @__PURE__ */React8.createElement(\"div\", {\n      key: \"JoyrideStep-\".concat(index),\n      className: \"react-joyride__step\"\n    }, /* @__PURE__ */React8.createElement(Floater, _objectSpread(_objectSpread({}, step.floaterProps), {}, {\n      component: this.renderTooltip,\n      debug,\n      getPopper: this.setPopper,\n      id: \"react-joyride-step-\".concat(index),\n      open: this.open,\n      placement: step.placement,\n      target: step.target\n    }), /* @__PURE__ */React8.createElement(JoyrideBeacon, {\n      beaconComponent: step.beaconComponent,\n      continuous,\n      index,\n      isLastStep: index + 1 === size,\n      locale: step.locale,\n      nonce,\n      onClickOrHover: this.handleClickHoverBeacon,\n      shouldFocus: shouldScroll2,\n      size,\n      step,\n      styles: step.styles\n    })));\n  }\n};\n\n// src/components/index.tsx\nvar Joyride = class extends React9.Component {\n  constructor(props) {\n    super(props);\n    __publicField(this, \"helpers\");\n    __publicField(this, \"store\");\n    /**\n     * Trigger the callback.\n     */\n    __publicField(this, \"callback\", data => {\n      const {\n        callback\n      } = this.props;\n      if (is6.function(callback)) {\n        callback(data);\n      }\n    });\n    /**\n     * Keydown event listener\n     */\n    __publicField(this, \"handleKeyboard\", event => {\n      const {\n        index,\n        lifecycle\n      } = this.state;\n      const {\n        steps\n      } = this.props;\n      const step = steps[index];\n      if (lifecycle === LIFECYCLE.TOOLTIP) {\n        if (event.code === \"Escape\" && step && !step.disableCloseOnEsc) {\n          this.store.close(\"keyboard\");\n        }\n      }\n    });\n    __publicField(this, \"handleClickOverlay\", () => {\n      const {\n        index\n      } = this.state;\n      const {\n        steps\n      } = this.props;\n      const step = getMergedStep(this.props, steps[index]);\n      if (!step.disableOverlayClose) {\n        this.helpers.close(\"overlay\");\n      }\n    });\n    /**\n     * Sync the store with the component's state\n     */\n    __publicField(this, \"syncState\", state => {\n      this.setState(state);\n    });\n    const {\n      debug,\n      getHelpers,\n      run = true,\n      stepIndex\n    } = props;\n    this.store = createStore(_objectSpread(_objectSpread({}, props), {}, {\n      controlled: run && is6.number(stepIndex)\n    }));\n    this.helpers = this.store.getHelpers();\n    const {\n      addListener\n    } = this.store;\n    log({\n      title: \"init\",\n      data: [{\n        key: \"props\",\n        value: this.props\n      }, {\n        key: \"state\",\n        value: this.state\n      }],\n      debug\n    });\n    addListener(this.syncState);\n    if (getHelpers) {\n      getHelpers(this.helpers);\n    }\n    this.state = this.store.getState();\n  }\n  componentDidMount() {\n    if (!canUseDOM()) {\n      return;\n    }\n    const {\n      debug,\n      disableCloseOnEsc,\n      run,\n      steps\n    } = this.props;\n    const {\n      start\n    } = this.store;\n    if (validateSteps(steps, debug) && run) {\n      start();\n    }\n    if (!disableCloseOnEsc) {\n      document.body.addEventListener(\"keydown\", this.handleKeyboard, {\n        passive: true\n      });\n    }\n  }\n  componentDidUpdate(previousProps, previousState) {\n    if (!canUseDOM()) {\n      return;\n    }\n    const {\n      action,\n      controlled,\n      index,\n      status\n    } = this.state;\n    const {\n      debug,\n      run,\n      stepIndex,\n      steps\n    } = this.props;\n    const {\n      stepIndex: previousStepIndex,\n      steps: previousSteps\n    } = previousProps;\n    const {\n      reset,\n      setSteps,\n      start,\n      stop,\n      update\n    } = this.store;\n    const {\n      changed: changedProps\n    } = treeChanges3(previousProps, this.props);\n    const {\n      changed,\n      changedFrom\n    } = treeChanges3(previousState, this.state);\n    const step = getMergedStep(this.props, steps[index]);\n    const stepsChanged = !isEqual(previousSteps, steps);\n    const stepIndexChanged = is6.number(stepIndex) && changedProps(\"stepIndex\");\n    const target = getElement(step.target);\n    if (stepsChanged) {\n      if (validateSteps(steps, debug)) {\n        setSteps(steps);\n      } else {\n        console.warn(\"Steps are not valid\", steps);\n      }\n    }\n    if (changedProps(\"run\")) {\n      if (run) {\n        start(stepIndex);\n      } else {\n        stop();\n      }\n    }\n    if (stepIndexChanged) {\n      let nextAction = is6.number(previousStepIndex) && previousStepIndex < stepIndex ? ACTIONS.NEXT : ACTIONS.PREV;\n      if (action === ACTIONS.STOP) {\n        nextAction = ACTIONS.START;\n      }\n      if (![STATUS.FINISHED, STATUS.SKIPPED].includes(status)) {\n        update({\n          action: action === ACTIONS.CLOSE ? ACTIONS.CLOSE : nextAction,\n          index: stepIndex,\n          lifecycle: LIFECYCLE.INIT\n        });\n      }\n    }\n    if (!controlled && status === STATUS.RUNNING && index === 0 && !target) {\n      this.store.update({\n        index: index + 1\n      });\n      this.callback(_objectSpread(_objectSpread({}, this.state), {}, {\n        type: EVENTS.TARGET_NOT_FOUND,\n        step\n      }));\n    }\n    const callbackData = _objectSpread(_objectSpread({}, this.state), {}, {\n      index,\n      step\n    });\n    const isAfterAction = changed(\"action\", [ACTIONS.NEXT, ACTIONS.PREV, ACTIONS.SKIP, ACTIONS.CLOSE]);\n    if (isAfterAction && changed(\"status\", STATUS.PAUSED)) {\n      const previousStep = getMergedStep(this.props, steps[previousState.index]);\n      this.callback(_objectSpread(_objectSpread({}, callbackData), {}, {\n        index: previousState.index,\n        lifecycle: LIFECYCLE.COMPLETE,\n        step: previousStep,\n        type: EVENTS.STEP_AFTER\n      }));\n    }\n    if (changed(\"status\", [STATUS.FINISHED, STATUS.SKIPPED])) {\n      const previousStep = getMergedStep(this.props, steps[previousState.index]);\n      if (!controlled) {\n        this.callback(_objectSpread(_objectSpread({}, callbackData), {}, {\n          index: previousState.index,\n          lifecycle: LIFECYCLE.COMPLETE,\n          step: previousStep,\n          type: EVENTS.STEP_AFTER\n        }));\n      }\n      this.callback(_objectSpread(_objectSpread({}, callbackData), {}, {\n        type: EVENTS.TOUR_END,\n        // Return the last step when the tour is finished\n        step: previousStep,\n        index: previousState.index\n      }));\n      reset();\n    } else if (changedFrom(\"status\", [STATUS.IDLE, STATUS.READY], STATUS.RUNNING)) {\n      this.callback(_objectSpread(_objectSpread({}, callbackData), {}, {\n        type: EVENTS.TOUR_START\n      }));\n    } else if (changed(\"status\") || changed(\"action\", ACTIONS.RESET)) {\n      this.callback(_objectSpread(_objectSpread({}, callbackData), {}, {\n        type: EVENTS.TOUR_STATUS\n      }));\n    }\n    this.scrollToStep(previousState);\n  }\n  componentWillUnmount() {\n    const {\n      disableCloseOnEsc\n    } = this.props;\n    if (!disableCloseOnEsc) {\n      document.body.removeEventListener(\"keydown\", this.handleKeyboard);\n    }\n  }\n  scrollToStep(previousState) {\n    const {\n      index,\n      lifecycle,\n      status\n    } = this.state;\n    const {\n      debug,\n      disableScrollParentFix = false,\n      scrollDuration,\n      scrollOffset = 20,\n      scrollToFirstStep = false,\n      steps\n    } = this.props;\n    const step = getMergedStep(this.props, steps[index]);\n    const target = getElement(step.target);\n    const shouldScrollToStep = shouldScroll({\n      isFirstStep: index === 0,\n      lifecycle,\n      previousLifecycle: previousState.lifecycle,\n      scrollToFirstStep,\n      step,\n      target\n    });\n    if (status === STATUS.RUNNING && shouldScrollToStep) {\n      const hasCustomScroll = hasCustomScrollParent(target, disableScrollParentFix);\n      const scrollParent2 = getScrollParent(target, disableScrollParentFix);\n      let scrollY = Math.floor(getScrollTo(target, scrollOffset, disableScrollParentFix)) || 0;\n      log({\n        title: \"scrollToStep\",\n        data: [{\n          key: \"index\",\n          value: index\n        }, {\n          key: \"lifecycle\",\n          value: lifecycle\n        }, {\n          key: \"status\",\n          value: status\n        }],\n        debug\n      });\n      const beaconPopper = this.store.getPopper(\"beacon\");\n      const tooltipPopper = this.store.getPopper(\"tooltip\");\n      if (lifecycle === LIFECYCLE.BEACON && beaconPopper) {\n        const {\n          offsets,\n          placement\n        } = beaconPopper;\n        if (![\"bottom\"].includes(placement) && !hasCustomScroll) {\n          scrollY = Math.floor(offsets.popper.top - scrollOffset);\n        }\n      } else if (lifecycle === LIFECYCLE.TOOLTIP && tooltipPopper) {\n        const {\n          flipped,\n          offsets,\n          placement\n        } = tooltipPopper;\n        if ([\"top\", \"right\", \"left\"].includes(placement) && !flipped && !hasCustomScroll) {\n          scrollY = Math.floor(offsets.popper.top - scrollOffset);\n        } else {\n          scrollY -= step.spotlightPadding;\n        }\n      }\n      scrollY = scrollY >= 0 ? scrollY : 0;\n      if (status === STATUS.RUNNING) {\n        scrollTo(scrollY, {\n          element: scrollParent2,\n          duration: scrollDuration\n        }).then(() => {\n          setTimeout(() => {\n            var _a;\n            (_a = this.store.getPopper(\"tooltip\")) == null ? void 0 : _a.instance.update();\n          }, 10);\n        });\n      }\n    }\n  }\n  render() {\n    if (!canUseDOM()) {\n      return null;\n    }\n    const {\n      index,\n      lifecycle,\n      status\n    } = this.state;\n    const {\n      continuous = false,\n      debug = false,\n      nonce,\n      scrollToFirstStep = false,\n      steps\n    } = this.props;\n    const isRunning = status === STATUS.RUNNING;\n    const content = {};\n    if (isRunning && steps[index]) {\n      const step = getMergedStep(this.props, steps[index]);\n      content.step = /* @__PURE__ */React9.createElement(JoyrideStep, _objectSpread(_objectSpread({}, this.state), {}, {\n        callback: this.callback,\n        continuous,\n        debug,\n        helpers: this.helpers,\n        nonce,\n        shouldScroll: !step.disableScrolling && (index !== 0 || scrollToFirstStep),\n        step,\n        store: this.store\n      }));\n      content.overlay = /* @__PURE__ */React9.createElement(JoyridePortal, {\n        id: \"react-joyride-portal\"\n      }, /* @__PURE__ */React9.createElement(JoyrideOverlay, _objectSpread(_objectSpread({}, step), {}, {\n        continuous,\n        debug,\n        lifecycle,\n        onClickOverlay: this.handleClickOverlay\n      })));\n    }\n    return /* @__PURE__ */React9.createElement(\"div\", {\n      className: \"react-joyride\"\n    }, content.step, content.overlay);\n  }\n};\n__publicField(Joyride, \"defaultProps\", defaultProps);\nvar components_default = Joyride;\nexport { ACTIONS, EVENTS, LIFECYCLE, ORIGIN, STATUS, components_default as default };","map":{"version":3,"names":["ACTIONS","INIT","START","STOP","RESET","PREV","NEXT","GO","CLOSE","SKIP","UPDATE","EVENTS","TOUR_START","STEP_BEFORE","BEACON","TOOLTIP","STEP_AFTER","TOUR_END","TOUR_STATUS","TARGET_NOT_FOUND","ERROR","LIFECYCLE","READY","COMPLETE","ORIGIN","BUTTON_CLOSE","BUTTON_PRIMARY","KEYBOARD","OVERLAY","STATUS","IDLE","WAITING","RUNNING","PAUSED","SKIPPED","FINISHED","React9","isEqual","is6","treeChanges3","scroll","scrollParent","canUseDOM","_a","window","document","createElement","getClientRect","element","getBoundingClientRect","getDocumentHeight","median","arguments","length","undefined","body","documentElement","heights","scrollHeight","offsetHeight","clientHeight","sort","a","b","middle","Math","floor","max","getElement","querySelector","error","process","env","NODE_ENV","console","getStyleComputedProperty","el","nodeType","getComputedStyle","getScrollParent","skipFix","forListener","scrollDocument","parent","isSameNode","hasScrolling","style","overflow","hasCustomScrollParent","hasCustomOffsetParent","offsetParent","hasPosition","type","HTMLElement","nodeName","styles","position","parentNode","isElementVisible","parentElement","display","visibility","getElementPosition","offset","_b","_c","elementRect","hasScrollParent","isFixedTarget","parentTop","top","offsetTop","parentScrollTop","scrollTop","getScrollTo","output","scrollingElement","scrollTo","value","options","duration","Promise","resolve","reject","limit","message","cloneElement","isValidElement","createPortal","innerText","is","isReact16","getBrowser","userAgent","navigator","browser","documentMode","test","Boolean","opera","includes","InstallTrigger","chrome","getObjectType","Object","prototype","toString","call","slice","toLowerCase","getReactNodeText","input","defaultValue","step","steps","text","values","props","component","replace","hasValidKeys","object","keys","plainObject","array","every","d","hexToRGB","hex","shorthandRegex","properHex","_m","r","g","result","exec","parseInt","hideBeacon","disableBeacon","placement","isLegacy","log","_ref","data","debug","title","warn","logFn","groupCollapsed","concat","Array","isArray","forEach","key","apply","groupEnd","noop","objectKeys","omit","TypeError","_len","filter","_key","hasOwnProperty","pick","_len2","_key2","replaceLocaleContent","replacer","String","children","map","child","shouldScroll","isFirstStep","lifecycle","previousLifecycle","scrollToFirstStep","target","disableScrolling","isFixed","deepmerge2","is2","defaultFloaterProps","preventOverflow","boundariesElement","wrapperOptions","defaultLocale","back","close","last","next","nextLabelWithProgress","open","skip","defaultStep","event","disableCloseOnEsc","disableOverlay","disableOverlayClose","disableScrollParentFix","hideBackButton","hideCloseButton","hideFooter","locale","showProgress","showSkipButton","spotlightClicks","spotlightPadding","defaultProps","continuous","getHelpers","run","scrollOffset","scrollDuration","deepmerge","defaultOptions","arrowColor","backgroundColor","beaconSize","overlayColor","primaryColor","spotlightShadow","textColor","width","zIndex","buttonBase","border","borderRadius","color","cursor","fontSize","lineHeight","padding","WebkitAppearance","spotlight","getStyles","_d","_e","floaterProps","mergedFloaterProps","mergedStyles","hideBeacon2","innerWidth","overlay","bottom","left","right","defaultStyles","beacon","_objectSpread","height","beaconInner","animation","opacity","transform","beaconOuter","join","boxSizing","transformOrigin","tooltip","maxWidth","tooltipContainer","textAlign","tooltipTitle","margin","tooltipContent","tooltipFooter","alignItems","justifyContent","marginTop","tooltipFooterSpacer","flex","buttonNext","buttonBack","marginLeft","marginRight","buttonClose","buttonSkip","mixBlendMode","overlayLegacy","overlayLegacyCenter","spotlightLegacy","boxShadow","floaterStyles","arrow","getTourProps","getMergedStep","currentStep","_f","mergedStep","all","isMergeableObject","scrollParent2","placementBeacon","validateStep","validateSteps","is3","defaultState","action","controlled","index","origin","size","status","validKeys","Store","constructor","_this","__publicField","Map","listener","getState","state","set","setState","name","beaconPopper","tooltipPopper","popper","getNextState","nextIndex","getSteps","restart","number","advance","Error","stepIndex","setSteps","store","get","force","newIndex","min","hasUpdatedState","oldState","before","JSON","stringify","after","nextState","initial","go","info","prev","reset","createStore","React2","treeChanges","React","JoyrideSpotlight","_ref2","className","Spotlight_default","JoyrideOverlay","Component","isScrolling","mouseOverSpotlight","showSpotlight","hiddenLifecycles","spotlightStyles","offsetY","clientY","pageY","offsetX","clientX","pageX","inSpotlightHeight","inSpotlightWidth","inSpotlight","updateState","clearTimeout","scrollTimeout","setTimeout","resizeTimeout","isActive","forceUpdate","componentDidMount","addEventListener","handleResize","componentDidUpdate","previousProps","changed","handleScroll","passive","handleMouseMove","removeEventListener","componentWillUnmount","overlayStyles","baseStyles","pointerEvents","round","transition","previousState","render","onClickOverlay","hideSpotlight","spotlight2","safariOverlay","_objectWithoutProperties","_excluded","onClick","role","React3","ReactDOM","JoyridePortal","id","node","appendChild","renderReact15","unmountComponentAtNode","removeChild","unstable_renderSubtreeIntoContainer","renderReact16","React8","Floater","is5","treeChanges2","Scope","tabIndex","canHaveFocus","validTabNodes","isValid","getAttribute","isVisible","querySelectorAll","canBeTabbed","code","interceptTab","preventDefault","elements","findValidTabElements","shiftKey","x","activeElement","indexOf","focus","noSize","offsetWidth","innerHTML","getPropertyValue","isHidden","handleKeyDown","requestAnimationFrame","checkFocus","selector","setFocus","React4","is4","JoyrideBeacon","c","beaconComponent","head","getElementsByTagName","nonce","setAttribute","css","createTextNode","shouldFocus","domElement","getElementById","isLastStep","onClickOrHover","sharedProps","onMouseEnter","ref","setBeaconRef","BeaconComponent","React7","React6","React5","JoyrideTooltipCloseButton","_ref3","_excluded2","_excluded3","preserveAspectRatio","version","viewBox","xmlns","fill","CloseButton_default","JoyrideTooltipContainer","backProps","closeProps","primaryProps","skipProps","tooltipProps","content","primary","Container_default","JoyrideTooltip","helpers","setTooltipRef","backText","closeText","lastText","nextText","skipText","primaryText","labelWithProgress","handleClickBack","handleClickClose","handleClickPrimary","handleClickSkip","tooltipComponent","cleanStep","_excluded4","renderProps","getElementsProps","TooltipComponent","JoyrideStep","update","setPopper","getPopper","callback","shouldScroll2","changedFrom","skipBeacon","hasStoreChanged","isInitial","isAfterAction","isControlled","elementExists","hasRenderedTarget","scope","removeScope","cleanupPoppers","renderTooltip","handleClickHoverBeacon","Joyride","function","addListener","syncState","start","handleKeyboard","previousStepIndex","previousSteps","stop","changedProps","stepsChanged","stepIndexChanged","nextAction","callbackData","previousStep","scrollToStep","shouldScrollToStep","hasCustomScroll","scrollY","offsets","flipped","then","instance","isRunning","handleClickOverlay","components_default"],"sources":["/workspace/Frontend/node_modules/react-joyride/src/literals/index.ts","/workspace/Frontend/node_modules/react-joyride/src/components/index.tsx","/workspace/Frontend/node_modules/react-joyride/src/modules/dom.ts","/workspace/Frontend/node_modules/react-joyride/src/modules/helpers.tsx","/workspace/Frontend/node_modules/react-joyride/src/modules/step.ts","/workspace/Frontend/node_modules/react-joyride/src/defaults.ts","/workspace/Frontend/node_modules/react-joyride/src/styles.ts","/workspace/Frontend/node_modules/react-joyride/src/modules/store.ts","/workspace/Frontend/node_modules/react-joyride/src/components/Overlay.tsx","/workspace/Frontend/node_modules/react-joyride/src/components/Spotlight.tsx","/workspace/Frontend/node_modules/react-joyride/src/components/Portal.tsx","/workspace/Frontend/node_modules/react-joyride/src/components/Step.tsx","/workspace/Frontend/node_modules/react-joyride/src/modules/scope.ts","/workspace/Frontend/node_modules/react-joyride/src/components/Beacon.tsx","/workspace/Frontend/node_modules/react-joyride/src/components/Tooltip/index.tsx","/workspace/Frontend/node_modules/react-joyride/src/components/Tooltip/Container.tsx","/workspace/Frontend/node_modules/react-joyride/src/components/Tooltip/CloseButton.tsx"],"sourcesContent":["export const ACTIONS = {\n  INIT: 'init',\n  START: 'start',\n  STOP: 'stop',\n  RESET: 'reset',\n  PREV: 'prev',\n  NEXT: 'next',\n  GO: 'go',\n  CLOSE: 'close',\n  SKIP: 'skip',\n  UPDATE: 'update',\n} as const;\n\nexport const EVENTS = {\n  TOUR_START: 'tour:start',\n  STEP_BEFORE: 'step:before',\n  BEACON: 'beacon',\n  TOOLTIP: 'tooltip',\n  STEP_AFTER: 'step:after',\n  TOUR_END: 'tour:end',\n  TOUR_STATUS: 'tour:status',\n  TARGET_NOT_FOUND: 'error:target_not_found',\n  ERROR: 'error',\n} as const;\n\nexport const LIFECYCLE = {\n  INIT: 'init',\n  READY: 'ready',\n  BEACON: 'beacon',\n  TOOLTIP: 'tooltip',\n  COMPLETE: 'complete',\n  ERROR: 'error',\n} as const;\n\nexport const ORIGIN = {\n  BUTTON_CLOSE: 'button_close',\n  BUTTON_PRIMARY: 'button_primary',\n  KEYBOARD: 'keyboard',\n  OVERLAY: 'overlay',\n} as const;\n\nexport const STATUS = {\n  IDLE: 'idle',\n  READY: 'ready',\n  WAITING: 'waiting',\n  RUNNING: 'running',\n  PAUSED: 'paused',\n  SKIPPED: 'skipped',\n  FINISHED: 'finished',\n  ERROR: 'error',\n} as const;\n","import * as React from 'react';\nimport { ReactNode } from 'react';\nimport isEqual from '@gilbarbara/deep-equal';\nimport is from 'is-lite';\nimport treeChanges from 'tree-changes';\n\nimport {\n  canUseDOM,\n  getElement,\n  getScrollParent,\n  getScrollTo,\n  hasCustomScrollParent,\n  scrollTo,\n} from '~/modules/dom';\nimport { log, shouldScroll } from '~/modules/helpers';\nimport { getMergedStep, validateSteps } from '~/modules/step';\nimport createStore from '~/modules/store';\n\nimport { ACTIONS, EVENTS, LIFECYCLE, STATUS } from '~/literals';\n\nimport Overlay from '~/components/Overlay';\nimport Portal from '~/components/Portal';\n\nimport { defaultProps } from '~/defaults';\nimport { Actions, CallBackProps, Props, State, Status, StoreHelpers } from '~/types';\n\nimport Step from './Step';\n\nclass Joyride extends React.Component<Props, State> {\n  private readonly helpers: StoreHelpers;\n  private readonly store: ReturnType<typeof createStore>;\n\n  static defaultProps = defaultProps;\n\n  constructor(props: Props) {\n    super(props);\n\n    const { debug, getHelpers, run = true, stepIndex } = props;\n\n    this.store = createStore({\n      ...props,\n      controlled: run && is.number(stepIndex),\n    });\n    this.helpers = this.store.getHelpers();\n\n    const { addListener } = this.store;\n\n    log({\n      title: 'init',\n      data: [\n        { key: 'props', value: this.props },\n        { key: 'state', value: this.state },\n      ],\n      debug,\n    });\n\n    // Sync the store to this component's state.\n    addListener(this.syncState);\n\n    if (getHelpers) {\n      getHelpers(this.helpers);\n    }\n\n    this.state = this.store.getState();\n  }\n\n  componentDidMount() {\n    if (!canUseDOM()) {\n      return;\n    }\n\n    const { debug, disableCloseOnEsc, run, steps } = this.props;\n    const { start } = this.store;\n\n    if (validateSteps(steps, debug) && run) {\n      start();\n    }\n\n    if (!disableCloseOnEsc) {\n      document.body.addEventListener('keydown', this.handleKeyboard, { passive: true });\n    }\n  }\n\n  componentDidUpdate(previousProps: Props, previousState: State) {\n    if (!canUseDOM()) {\n      return;\n    }\n\n    const { action, controlled, index, status } = this.state;\n    const { debug, run, stepIndex, steps } = this.props;\n    const { stepIndex: previousStepIndex, steps: previousSteps } = previousProps;\n    const { reset, setSteps, start, stop, update } = this.store;\n    const { changed: changedProps } = treeChanges(previousProps, this.props);\n    const { changed, changedFrom } = treeChanges(previousState, this.state);\n    const step = getMergedStep(this.props, steps[index]);\n\n    const stepsChanged = !isEqual(previousSteps, steps);\n    const stepIndexChanged = is.number(stepIndex) && changedProps('stepIndex');\n    const target = getElement(step.target);\n\n    if (stepsChanged) {\n      if (validateSteps(steps, debug)) {\n        setSteps(steps);\n      } else {\n        // eslint-disable-next-line no-console\n        console.warn('Steps are not valid', steps);\n      }\n    }\n\n    if (changedProps('run')) {\n      if (run) {\n        start(stepIndex);\n      } else {\n        stop();\n      }\n    }\n\n    if (stepIndexChanged) {\n      let nextAction: Actions =\n        is.number(previousStepIndex) && previousStepIndex < stepIndex ? ACTIONS.NEXT : ACTIONS.PREV;\n\n      if (action === ACTIONS.STOP) {\n        nextAction = ACTIONS.START;\n      }\n\n      if (!([STATUS.FINISHED, STATUS.SKIPPED] as Array<Status>).includes(status)) {\n        update({\n          action: action === ACTIONS.CLOSE ? ACTIONS.CLOSE : nextAction,\n          index: stepIndex,\n          lifecycle: LIFECYCLE.INIT,\n        });\n      }\n    }\n\n    // Update the index if the first step is not found\n    if (!controlled && status === STATUS.RUNNING && index === 0 && !target) {\n      this.store.update({ index: index + 1 });\n      this.callback({\n        ...this.state,\n        type: EVENTS.TARGET_NOT_FOUND,\n        step,\n      });\n    }\n\n    const callbackData = {\n      ...this.state,\n      index,\n      step,\n    };\n    const isAfterAction = changed('action', [\n      ACTIONS.NEXT,\n      ACTIONS.PREV,\n      ACTIONS.SKIP,\n      ACTIONS.CLOSE,\n    ]);\n\n    if (isAfterAction && changed('status', STATUS.PAUSED)) {\n      const previousStep = getMergedStep(this.props, steps[previousState.index]);\n\n      this.callback({\n        ...callbackData,\n        index: previousState.index,\n        lifecycle: LIFECYCLE.COMPLETE,\n        step: previousStep,\n        type: EVENTS.STEP_AFTER,\n      });\n    }\n\n    if (changed('status', [STATUS.FINISHED, STATUS.SKIPPED])) {\n      const previousStep = getMergedStep(this.props, steps[previousState.index]);\n\n      if (!controlled) {\n        this.callback({\n          ...callbackData,\n          index: previousState.index,\n          lifecycle: LIFECYCLE.COMPLETE,\n          step: previousStep,\n          type: EVENTS.STEP_AFTER,\n        });\n      }\n\n      this.callback({\n        ...callbackData,\n        type: EVENTS.TOUR_END,\n        // Return the last step when the tour is finished\n        step: previousStep,\n        index: previousState.index,\n      });\n      reset();\n    } else if (changedFrom('status', [STATUS.IDLE, STATUS.READY], STATUS.RUNNING)) {\n      this.callback({\n        ...callbackData,\n        type: EVENTS.TOUR_START,\n      });\n    } else if (changed('status') || changed('action', ACTIONS.RESET)) {\n      this.callback({\n        ...callbackData,\n        type: EVENTS.TOUR_STATUS,\n      });\n    }\n\n    this.scrollToStep(previousState);\n  }\n\n  componentWillUnmount() {\n    const { disableCloseOnEsc } = this.props;\n\n    if (!disableCloseOnEsc) {\n      document.body.removeEventListener('keydown', this.handleKeyboard);\n    }\n  }\n\n  /**\n   * Trigger the callback.\n   */\n  callback = (data: CallBackProps) => {\n    const { callback } = this.props;\n\n    if (is.function(callback)) {\n      callback(data);\n    }\n  };\n\n  /**\n   * Keydown event listener\n   */\n  handleKeyboard = (event: KeyboardEvent) => {\n    const { index, lifecycle } = this.state;\n    const { steps } = this.props;\n    const step = steps[index];\n\n    if (lifecycle === LIFECYCLE.TOOLTIP) {\n      if (event.code === 'Escape' && step && !step.disableCloseOnEsc) {\n        this.store.close('keyboard');\n      }\n    }\n  };\n\n  handleClickOverlay = () => {\n    const { index } = this.state;\n    const { steps } = this.props;\n\n    const step = getMergedStep(this.props, steps[index]);\n\n    if (!step.disableOverlayClose) {\n      this.helpers.close('overlay');\n    }\n  };\n\n  /**\n   * Sync the store with the component's state\n   */\n  syncState = (state: State) => {\n    this.setState(state);\n  };\n\n  scrollToStep(previousState: State) {\n    const { index, lifecycle, status } = this.state;\n    const {\n      debug,\n      disableScrollParentFix = false,\n      scrollDuration,\n      scrollOffset = 20,\n      scrollToFirstStep = false,\n      steps,\n    } = this.props;\n    const step = getMergedStep(this.props, steps[index]);\n\n    const target = getElement(step.target);\n    const shouldScrollToStep = shouldScroll({\n      isFirstStep: index === 0,\n      lifecycle,\n      previousLifecycle: previousState.lifecycle,\n      scrollToFirstStep,\n      step,\n      target,\n    });\n\n    if (status === STATUS.RUNNING && shouldScrollToStep) {\n      const hasCustomScroll = hasCustomScrollParent(target, disableScrollParentFix);\n      const scrollParent = getScrollParent(target, disableScrollParentFix);\n      let scrollY = Math.floor(getScrollTo(target, scrollOffset, disableScrollParentFix)) || 0;\n\n      log({\n        title: 'scrollToStep',\n        data: [\n          { key: 'index', value: index },\n          { key: 'lifecycle', value: lifecycle },\n          { key: 'status', value: status },\n        ],\n        debug,\n      });\n\n      const beaconPopper = this.store.getPopper('beacon');\n      const tooltipPopper = this.store.getPopper('tooltip');\n\n      if (lifecycle === LIFECYCLE.BEACON && beaconPopper) {\n        const { offsets, placement } = beaconPopper;\n\n        if (!['bottom'].includes(placement) && !hasCustomScroll) {\n          scrollY = Math.floor(offsets.popper.top - scrollOffset);\n        }\n      } else if (lifecycle === LIFECYCLE.TOOLTIP && tooltipPopper) {\n        const { flipped, offsets, placement } = tooltipPopper;\n\n        if (['top', 'right', 'left'].includes(placement) && !flipped && !hasCustomScroll) {\n          scrollY = Math.floor(offsets.popper.top - scrollOffset);\n        } else {\n          scrollY -= step.spotlightPadding;\n        }\n      }\n\n      scrollY = scrollY >= 0 ? scrollY : 0;\n\n      if (status === STATUS.RUNNING) {\n        scrollTo(scrollY, { element: scrollParent as Element, duration: scrollDuration }).then(\n          () => {\n            setTimeout(() => {\n              this.store.getPopper('tooltip')?.instance.update();\n            }, 10);\n          },\n        );\n      }\n    }\n  }\n\n  render() {\n    if (!canUseDOM()) {\n      return null;\n    }\n\n    const { index, lifecycle, status } = this.state;\n    const {\n      continuous = false,\n      debug = false,\n      nonce,\n      scrollToFirstStep = false,\n      steps,\n    } = this.props;\n    const isRunning = status === STATUS.RUNNING;\n    const content: Record<string, ReactNode> = {};\n\n    if (isRunning && steps[index]) {\n      const step = getMergedStep(this.props, steps[index]);\n\n      content.step = (\n        <Step\n          {...this.state}\n          callback={this.callback}\n          continuous={continuous}\n          debug={debug}\n          helpers={this.helpers}\n          nonce={nonce}\n          shouldScroll={!step.disableScrolling && (index !== 0 || scrollToFirstStep)}\n          step={step}\n          store={this.store}\n        />\n      );\n\n      content.overlay = (\n        <Portal id=\"react-joyride-portal\">\n          <Overlay\n            {...step}\n            continuous={continuous}\n            debug={debug}\n            lifecycle={lifecycle}\n            onClickOverlay={this.handleClickOverlay}\n          />\n        </Portal>\n      );\n    }\n\n    return (\n      <div className=\"react-joyride\">\n        {content.step}\n        {content.overlay}\n      </div>\n    );\n  }\n}\n\nexport default Joyride;\n","import scroll from 'scroll';\nimport scrollParent from 'scrollparent';\n\nexport function canUseDOM() {\n  return !!(typeof window !== 'undefined' && window.document?.createElement);\n}\n\n/**\n * Find the bounding client rect\n */\nexport function getClientRect(element: HTMLElement | null) {\n  if (!element) {\n    return null;\n  }\n\n  return element.getBoundingClientRect();\n}\n\n/**\n * Helper function to get the browser-normalized \"document height\"\n */\nexport function getDocumentHeight(median = false): number {\n  const { body, documentElement } = document;\n\n  if (!body || !documentElement) {\n    return 0;\n  }\n\n  if (median) {\n    const heights = [\n      body.scrollHeight,\n      body.offsetHeight,\n      documentElement.clientHeight,\n      documentElement.scrollHeight,\n      documentElement.offsetHeight,\n    ].sort((a, b) => a - b);\n    const middle = Math.floor(heights.length / 2);\n\n    if (heights.length % 2 === 0) {\n      return (heights[middle - 1] + heights[middle]) / 2;\n    }\n\n    return heights[middle];\n  }\n\n  return Math.max(\n    body.scrollHeight,\n    body.offsetHeight,\n    documentElement.clientHeight,\n    documentElement.scrollHeight,\n    documentElement.offsetHeight,\n  );\n}\n\n/**\n * Find and return the target DOM element based on a step's 'target'.\n */\nexport function getElement(element: string | HTMLElement): HTMLElement | null {\n  if (typeof element === 'string') {\n    try {\n      return document.querySelector(element);\n    } catch (error: any) {\n      if (process.env.NODE_ENV !== 'production') {\n        // eslint-disable-next-line no-console\n        console.error(error);\n      }\n\n      return null;\n    }\n  }\n\n  return element;\n}\n\n/**\n *  Get computed style property\n */\nexport function getStyleComputedProperty(el: HTMLElement): CSSStyleDeclaration | null {\n  if (!el || el.nodeType !== 1) {\n    return null;\n  }\n\n  return getComputedStyle(el);\n}\n\n/**\n * Get scroll parent with fix\n */\nexport function getScrollParent(\n  element: HTMLElement | null,\n  skipFix: boolean,\n  forListener?: boolean,\n) {\n  if (!element) {\n    return scrollDocument();\n  }\n\n  const parent = scrollParent(element) as HTMLElement;\n\n  if (parent) {\n    if (parent.isSameNode(scrollDocument())) {\n      if (forListener) {\n        return document;\n      }\n\n      return scrollDocument();\n    }\n\n    const hasScrolling = parent.scrollHeight > parent.offsetHeight;\n\n    if (!hasScrolling && !skipFix) {\n      parent.style.overflow = 'initial';\n\n      return scrollDocument();\n    }\n  }\n\n  return parent;\n}\n\n/**\n * Check if the element has custom scroll parent\n */\nexport function hasCustomScrollParent(element: HTMLElement | null, skipFix: boolean): boolean {\n  if (!element) {\n    return false;\n  }\n\n  const parent = getScrollParent(element, skipFix);\n\n  return parent ? !parent.isSameNode(scrollDocument()) : false;\n}\n\n/**\n * Check if the element has custom offset parent\n */\nexport function hasCustomOffsetParent(element: HTMLElement): boolean {\n  return element.offsetParent !== document.body;\n}\n\n/**\n * Check if an element has fixed/sticky position\n */\nexport function hasPosition(el: HTMLElement | Node | null, type: string = 'fixed'): boolean {\n  if (!el || !(el instanceof HTMLElement)) {\n    return false;\n  }\n\n  const { nodeName } = el;\n  const styles = getStyleComputedProperty(el);\n\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\n    return false;\n  }\n\n  if (styles && styles.position === type) {\n    return true;\n  }\n\n  if (!el.parentNode) {\n    return false;\n  }\n\n  return hasPosition(el.parentNode, type);\n}\n\n/**\n * Check if the element is visible\n */\nexport function isElementVisible(element: HTMLElement): element is HTMLElement {\n  if (!element) {\n    return false;\n  }\n\n  let parentElement: HTMLElement | null = element;\n\n  while (parentElement) {\n    if (parentElement === document.body) {\n      break;\n    }\n\n    if (parentElement instanceof HTMLElement) {\n      const { display, visibility } = getComputedStyle(parentElement);\n\n      if (display === 'none' || visibility === 'hidden') {\n        return false;\n      }\n    }\n\n    parentElement = parentElement.parentElement ?? null;\n  }\n\n  return true;\n}\n\n/**\n * Find and return the target DOM element based on a step's 'target'.\n */\nexport function getElementPosition(\n  element: HTMLElement | null,\n  offset: number,\n  skipFix: boolean,\n): number {\n  const elementRect = getClientRect(element);\n  const parent = getScrollParent(element, skipFix);\n  const hasScrollParent = hasCustomScrollParent(element, skipFix);\n  const isFixedTarget = hasPosition(element);\n  let parentTop = 0;\n  let top = elementRect?.top ?? 0;\n\n  if (hasScrollParent && isFixedTarget) {\n    const offsetTop = element?.offsetTop ?? 0;\n    const parentScrollTop = (parent as HTMLElement)?.scrollTop ?? 0;\n\n    top = offsetTop - parentScrollTop;\n  } else if (parent instanceof HTMLElement) {\n    parentTop = parent.scrollTop;\n\n    if (!hasScrollParent && !hasPosition(element)) {\n      top += parentTop;\n    }\n\n    if (!parent.isSameNode(scrollDocument())) {\n      top += scrollDocument().scrollTop;\n    }\n  }\n\n  return Math.floor(top - offset);\n}\n\n/**\n * Get the scrollTop position\n */\nexport function getScrollTo(element: HTMLElement | null, offset: number, skipFix: boolean): number {\n  if (!element) {\n    return 0;\n  }\n\n  const { offsetTop = 0, scrollTop = 0 } = scrollParent(element) ?? {};\n  let top = element.getBoundingClientRect().top + scrollTop;\n\n  if (!!offsetTop && (hasCustomScrollParent(element, skipFix) || hasCustomOffsetParent(element))) {\n    top -= offsetTop;\n  }\n\n  const output = Math.floor(top - offset);\n\n  return output < 0 ? 0 : output;\n}\n\nexport function scrollDocument(): Element | HTMLElement {\n  return document.scrollingElement ?? document.documentElement;\n}\n\n/**\n * Scroll to position\n */\nexport function scrollTo(\n  value: number,\n  options: { duration?: number; element: Element | HTMLElement },\n): Promise<void> {\n  const { duration, element } = options;\n\n  return new Promise((resolve, reject) => {\n    const { scrollTop } = element;\n\n    const limit = value > scrollTop ? value - scrollTop : scrollTop - value;\n\n    scroll.top(element as HTMLElement, value, { duration: limit < 100 ? 50 : duration }, error => {\n      if (error && error.message !== 'Element already at target scroll position') {\n        return reject(error);\n      }\n\n      return resolve();\n    });\n  });\n}\n","import { cloneElement, FC, isValidElement, ReactElement, ReactNode } from 'react';\nimport { createPortal } from 'react-dom';\nimport innerText from 'react-innertext';\nimport is from 'is-lite';\n\nimport { LIFECYCLE } from '~/literals';\n\nimport { AnyObject, Lifecycle, NarrowPlainObject, Step } from '~/types';\n\nimport { hasPosition } from './dom';\n\ninterface GetReactNodeTextOptions {\n  defaultValue?: any;\n  step?: number;\n  steps?: number;\n}\n\ninterface LogOptions {\n  /** The data to be logged */\n  data: any;\n  /** display the log */\n  debug?: boolean;\n  /** The title the logger was called from */\n  title: string;\n  /** If true, the message will be a warning */\n  warn?: boolean;\n}\n\ninterface ShouldScrollOptions {\n  isFirstStep: boolean;\n  lifecycle: Lifecycle;\n  previousLifecycle: Lifecycle;\n  scrollToFirstStep: boolean;\n  step: Step;\n  target: HTMLElement | null;\n}\n\nexport const isReact16 = createPortal !== undefined;\n\n/**\n * Get the current browser\n */\nexport function getBrowser(userAgent: string = navigator.userAgent): string {\n  let browser = userAgent;\n\n  if (typeof window === 'undefined') {\n    browser = 'node';\n  }\n  // @ts-expect-error IE support\n  else if (document.documentMode) {\n    browser = 'ie';\n  } else if (/Edge/.test(userAgent)) {\n    browser = 'edge';\n  }\n  // @ts-expect-error Opera 8.0+\n  else if (Boolean(window.opera) || userAgent.includes(' OPR/')) {\n    browser = 'opera';\n  }\n  // @ts-expect-error Firefox 1.0+\n  else if (typeof window.InstallTrigger !== 'undefined') {\n    browser = 'firefox';\n  }\n  // @ts-expect-error Chrome 1+\n  else if (window.chrome) {\n    browser = 'chrome';\n  }\n  // Safari (and Chrome iOS, Firefox iOS)\n  else if (/(Version\\/([\\d._]+).*Safari|CriOS|FxiOS| Mobile\\/)/.test(userAgent)) {\n    browser = 'safari';\n  }\n\n  return browser;\n}\n\n/**\n * Get Object type\n */\nexport function getObjectType(value: unknown): string {\n  return Object.prototype.toString.call(value).slice(8, -1).toLowerCase();\n}\n\nexport function getReactNodeText(input: ReactNode, options: GetReactNodeTextOptions = {}): string {\n  const { defaultValue, step, steps } = options;\n  let text = innerText(input);\n\n  if (!text) {\n    if (\n      isValidElement(input) &&\n      !Object.values(input.props).length &&\n      getObjectType(input.type) === 'function'\n    ) {\n      const component = (input.type as FC)({});\n\n      text = getReactNodeText(component, options);\n    } else {\n      text = innerText(defaultValue);\n    }\n  } else if ((text.includes('{step}') || text.includes('{steps}')) && step && steps) {\n    text = text.replace('{step}', step.toString()).replace('{steps}', steps.toString());\n  }\n\n  return text;\n}\n\nexport function hasValidKeys(object: Record<string, unknown>, keys?: Array<string>): boolean {\n  if (!is.plainObject(object) || !is.array(keys)) {\n    return false;\n  }\n\n  return Object.keys(object).every(d => keys.includes(d));\n}\n\n/**\n * Convert hex to RGB\n */\nexport function hexToRGB(hex: string): Array<number> {\n  const shorthandRegex = /^#?([\\da-f])([\\da-f])([\\da-f])$/i;\n  const properHex = hex.replace(shorthandRegex, (_m, r, g, b) => r + r + g + g + b + b);\n\n  const result = /^#?([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})$/i.exec(properHex);\n\n  return result ? [parseInt(result[1], 16), parseInt(result[2], 16), parseInt(result[3], 16)] : [];\n}\n\n/**\n * Decide if the step shouldn't skip the beacon\n * @param {Object} step\n *\n * @returns {boolean}\n */\nexport function hideBeacon(step: Step): boolean {\n  return step.disableBeacon || step.placement === 'center';\n}\n\n/**\n * Detect legacy browsers\n *\n * @returns {boolean}\n */\nexport function isLegacy(): boolean {\n  return !['chrome', 'safari', 'firefox', 'opera'].includes(getBrowser());\n}\n\n/**\n * Log method calls if debug is enabled\n */\nexport function log({ data, debug = false, title, warn = false }: LogOptions) {\n  /* eslint-disable no-console */\n  const logFn = warn ? console.warn || console.error : console.log;\n\n  if (debug) {\n    if (title && data) {\n      console.groupCollapsed(\n        `%creact-joyride: ${title}`,\n        'color: #ff0044; font-weight: bold; font-size: 12px;',\n      );\n\n      if (Array.isArray(data)) {\n        data.forEach(d => {\n          if (is.plainObject(d) && d.key) {\n            logFn.apply(console, [d.key, d.value]);\n          } else {\n            logFn.apply(console, [d]);\n          }\n        });\n      } else {\n        logFn.apply(console, [data]);\n      }\n\n      console.groupEnd();\n    } else {\n      console.error('Missing title or data props');\n    }\n  }\n  /* eslint-enable */\n}\n\n/**\n * A function that does nothing.\n */\nexport function noop() {\n  return undefined;\n}\n\n/**\n * Type-safe Object.keys()\n */\nexport function objectKeys<T extends AnyObject>(input: T) {\n  return Object.keys(input) as Array<keyof T>;\n}\n\n/**\n * Remove properties from an object\n */\nexport function omit<T extends Record<string, any>, K extends keyof T>(\n  input: NarrowPlainObject<T>,\n  ...filter: K[]\n) {\n  if (!is.plainObject(input)) {\n    throw new TypeError('Expected an object');\n  }\n\n  const output: any = {};\n\n  for (const key in input) {\n    /* istanbul ignore else */\n    if ({}.hasOwnProperty.call(input, key)) {\n      if (!filter.includes(key as unknown as K)) {\n        output[key] = input[key];\n      }\n    }\n  }\n\n  return output as Omit<T, K>;\n}\n\n/**\n * Select properties from an object\n */\nexport function pick<T extends Record<string, any>, K extends keyof T>(\n  input: NarrowPlainObject<T>,\n  ...filter: K[]\n) {\n  if (!is.plainObject(input)) {\n    throw new TypeError('Expected an object');\n  }\n\n  if (!filter.length) {\n    return input;\n  }\n\n  const output: any = {};\n\n  for (const key in input) {\n    /* istanbul ignore else */\n    if ({}.hasOwnProperty.call(input, key)) {\n      if (filter.includes(key as unknown as K)) {\n        output[key] = input[key];\n      }\n    }\n  }\n\n  return output as Pick<T, K>;\n}\n\nexport function replaceLocaleContent(input: ReactNode, step: number, steps: number): ReactNode {\n  const replacer = (text: string) =>\n    text.replace('{step}', String(step)).replace('{steps}', String(steps));\n\n  if (getObjectType(input) === 'string') {\n    return replacer(input as string);\n  }\n\n  if (!isValidElement(input)) {\n    return input;\n  }\n\n  const { children } = input.props;\n\n  if (getObjectType(children) === 'string' && children.includes('{step}')) {\n    return cloneElement(input as ReactElement, {\n      children: replacer(children),\n    });\n  }\n\n  if (Array.isArray(children)) {\n    return cloneElement(input as ReactElement, {\n      children: children.map((child: ReactNode) => {\n        if (typeof child === 'string') {\n          return replacer(child);\n        }\n\n        return replaceLocaleContent(child, step, steps);\n      }),\n    });\n  }\n\n  if (getObjectType(input.type) === 'function' && !Object.values(input.props).length) {\n    const component = (input.type as FC)({});\n\n    return replaceLocaleContent(component, step, steps);\n  }\n\n  return input;\n}\n\nexport function shouldScroll(options: ShouldScrollOptions): boolean {\n  const { isFirstStep, lifecycle, previousLifecycle, scrollToFirstStep, step, target } = options;\n\n  return (\n    !step.disableScrolling &&\n    (!isFirstStep || scrollToFirstStep || lifecycle === LIFECYCLE.TOOLTIP) &&\n    step.placement !== 'center' &&\n    (!step.isFixed || !hasPosition(target)) && // fixed steps don't need to scroll\n    previousLifecycle !== lifecycle &&\n    ([LIFECYCLE.BEACON, LIFECYCLE.TOOLTIP] as Array<Lifecycle>).includes(lifecycle)\n  );\n}\n\n/**\n * Block execution\n */\nexport function sleep(seconds = 1) {\n  return new Promise(resolve => {\n    setTimeout(resolve, seconds * 1000);\n  });\n}\n","import { Props as FloaterProps } from 'react-floater';\nimport deepmerge from 'deepmerge';\nimport is from 'is-lite';\nimport { SetRequired } from 'type-fest';\n\nimport { defaultFloaterProps, defaultLocale, defaultStep } from '~/defaults';\nimport getStyles from '~/styles';\nimport { Props, Step, StepMerged } from '~/types';\n\nimport { getElement, hasCustomScrollParent } from './dom';\nimport { log, omit, pick } from './helpers';\n\nfunction getTourProps(props: Props) {\n  return pick(\n    props,\n    'beaconComponent',\n    'disableCloseOnEsc',\n    'disableOverlay',\n    'disableOverlayClose',\n    'disableScrolling',\n    'disableScrollParentFix',\n    'floaterProps',\n    'hideBackButton',\n    'hideCloseButton',\n    'locale',\n    'showProgress',\n    'showSkipButton',\n    'spotlightClicks',\n    'spotlightPadding',\n    'styles',\n    'tooltipComponent',\n  );\n}\n\nexport function getMergedStep(props: Props, currentStep?: Step): StepMerged {\n  const step = currentStep ?? {};\n  const mergedStep = deepmerge.all([defaultStep, getTourProps(props), step], {\n    isMergeableObject: is.plainObject,\n  }) as StepMerged;\n\n  const mergedStyles = getStyles(props, mergedStep);\n  const scrollParent = hasCustomScrollParent(\n    getElement(mergedStep.target),\n    mergedStep.disableScrollParentFix,\n  );\n  const floaterProps = deepmerge.all([\n    defaultFloaterProps,\n    props.floaterProps ?? {},\n    mergedStep.floaterProps ?? {},\n  ]) as SetRequired<FloaterProps, 'options' | 'wrapperOptions'>;\n\n  // Set react-floater props\n  floaterProps.offset = mergedStep.offset;\n  floaterProps.styles = deepmerge(floaterProps.styles ?? {}, mergedStyles.floaterStyles);\n\n  floaterProps.offset += props.spotlightPadding ?? mergedStep.spotlightPadding ?? 0;\n\n  if (mergedStep.placementBeacon && floaterProps.wrapperOptions) {\n    floaterProps.wrapperOptions.placement = mergedStep.placementBeacon;\n  }\n\n  if (scrollParent && floaterProps.options.preventOverflow) {\n    floaterProps.options.preventOverflow.boundariesElement = 'window';\n  }\n\n  return {\n    ...mergedStep,\n    locale: deepmerge.all([defaultLocale, props.locale ?? {}, mergedStep.locale || {}]),\n    floaterProps,\n    styles: omit(mergedStyles, 'floaterStyles'),\n  };\n}\n\n/**\n * Validate if a step is valid\n */\nexport function validateStep(step: Step, debug: boolean = false): boolean {\n  if (!is.plainObject(step)) {\n    log({\n      title: 'validateStep',\n      data: 'step must be an object',\n      warn: true,\n      debug,\n    });\n\n    return false;\n  }\n\n  if (!step.target) {\n    log({\n      title: 'validateStep',\n      data: 'target is missing from the step',\n      warn: true,\n      debug,\n    });\n\n    return false;\n  }\n\n  return true;\n}\n\n/**\n * Validate if steps are valid\n */\nexport function validateSteps(steps: Array<Step>, debug: boolean = false): boolean {\n  if (!is.array(steps)) {\n    log({\n      title: 'validateSteps',\n      data: 'steps must be an array',\n      warn: true,\n      debug,\n    });\n\n    return false;\n  }\n\n  return steps.every(d => validateStep(d, debug));\n}\n","import { noop } from '~/modules/helpers';\n\nimport { FloaterProps, Locale, Props, Step } from '~/types';\n\nexport const defaultFloaterProps: FloaterProps = {\n  options: {\n    preventOverflow: {\n      boundariesElement: 'scrollParent',\n    },\n  },\n  wrapperOptions: {\n    offset: -18,\n    position: true,\n  },\n};\n\nexport const defaultLocale: Locale = {\n  back: 'Back',\n  close: 'Close',\n  last: 'Last',\n  next: 'Next',\n  nextLabelWithProgress: 'Next (Step {step} of {steps})',\n  open: 'Open the dialog',\n  skip: 'Skip',\n};\n\nexport const defaultStep = {\n  event: 'click',\n  placement: 'bottom',\n  offset: 10,\n  disableBeacon: false,\n  disableCloseOnEsc: false,\n  disableOverlay: false,\n  disableOverlayClose: false,\n  disableScrollParentFix: false,\n  disableScrolling: false,\n  hideBackButton: false,\n  hideCloseButton: false,\n  hideFooter: false,\n  isFixed: false,\n  locale: defaultLocale,\n  showProgress: false,\n  showSkipButton: false,\n  spotlightClicks: false,\n  spotlightPadding: 10,\n} satisfies Omit<Step, 'content' | 'target'>;\n\nexport const defaultProps = {\n  continuous: false,\n  debug: false,\n  disableCloseOnEsc: false,\n  disableOverlay: false,\n  disableOverlayClose: false,\n  disableScrolling: false,\n  disableScrollParentFix: false,\n  getHelpers: noop(),\n  hideBackButton: false,\n  run: true,\n  scrollOffset: 20,\n  scrollDuration: 300,\n  scrollToFirstStep: false,\n  showSkipButton: false,\n  showProgress: false,\n  spotlightClicks: false,\n  spotlightPadding: 10,\n  steps: [],\n} satisfies Props;\n","import deepmerge from 'deepmerge';\n\nimport { hexToRGB } from './modules/helpers';\nimport { Props, StepMerged, StylesOptions, StylesWithFloaterStyles } from './types';\n\nconst defaultOptions = {\n  arrowColor: '#fff',\n  backgroundColor: '#fff',\n  beaconSize: 36,\n  overlayColor: 'rgba(0, 0, 0, 0.5)',\n  primaryColor: '#f04',\n  spotlightShadow: '0 0 15px rgba(0, 0, 0, 0.5)',\n  textColor: '#333',\n  width: 380,\n  zIndex: 100,\n} satisfies StylesOptions;\n\nconst buttonBase = {\n  backgroundColor: 'transparent',\n  border: 0,\n  borderRadius: 0,\n  color: '#555',\n  cursor: 'pointer',\n  fontSize: 16,\n  lineHeight: 1,\n  padding: 8,\n  WebkitAppearance: 'none',\n};\n\nconst spotlight = {\n  borderRadius: 4,\n  position: 'absolute',\n};\n\nexport default function getStyles(props: Props, step: StepMerged) {\n  const { floaterProps, styles } = props;\n  const mergedFloaterProps = deepmerge(step.floaterProps ?? {}, floaterProps ?? {});\n  const mergedStyles = deepmerge(styles ?? {}, step.styles ?? {});\n  const options = deepmerge(defaultOptions, mergedStyles.options || {}) satisfies StylesOptions;\n  const hideBeacon = step.placement === 'center' || step.disableBeacon;\n  let { width } = options;\n\n  if (window.innerWidth > 480) {\n    width = 380;\n  }\n\n  if ('width' in options) {\n    width =\n      typeof options.width === 'number' && window.innerWidth < options.width\n        ? window.innerWidth - 30\n        : options.width;\n  }\n\n  const overlay = {\n    bottom: 0,\n    left: 0,\n    overflow: 'hidden',\n    position: 'absolute',\n    right: 0,\n    top: 0,\n    zIndex: options.zIndex,\n  };\n\n  const defaultStyles = {\n    beacon: {\n      ...buttonBase,\n      display: hideBeacon ? 'none' : 'inline-block',\n      height: options.beaconSize,\n      position: 'relative',\n      width: options.beaconSize,\n      zIndex: options.zIndex,\n    },\n    beaconInner: {\n      animation: 'joyride-beacon-inner 1.2s infinite ease-in-out',\n      backgroundColor: options.primaryColor,\n      borderRadius: '50%',\n      display: 'block',\n      height: '50%',\n      left: '50%',\n      opacity: 0.7,\n      position: 'absolute',\n      top: '50%',\n      transform: 'translate(-50%, -50%)',\n      width: '50%',\n    },\n    beaconOuter: {\n      animation: 'joyride-beacon-outer 1.2s infinite ease-in-out',\n      backgroundColor: `rgba(${hexToRGB(options.primaryColor).join(',')}, 0.2)`,\n      border: `2px solid ${options.primaryColor}`,\n      borderRadius: '50%',\n      boxSizing: 'border-box',\n      display: 'block',\n      height: '100%',\n      left: 0,\n      opacity: 0.9,\n      position: 'absolute',\n      top: 0,\n      transformOrigin: 'center',\n      width: '100%',\n    },\n    tooltip: {\n      backgroundColor: options.backgroundColor,\n      borderRadius: 5,\n      boxSizing: 'border-box',\n      color: options.textColor,\n      fontSize: 16,\n      maxWidth: '100%',\n      padding: 15,\n      position: 'relative',\n      width,\n    },\n    tooltipContainer: {\n      lineHeight: 1.4,\n      textAlign: 'center',\n    },\n    tooltipTitle: {\n      fontSize: 18,\n      margin: 0,\n    },\n    tooltipContent: {\n      padding: '20px 10px',\n    },\n    tooltipFooter: {\n      alignItems: 'center',\n      display: 'flex',\n      justifyContent: 'flex-end',\n      marginTop: 15,\n    },\n    tooltipFooterSpacer: {\n      flex: 1,\n    },\n    buttonNext: {\n      ...buttonBase,\n      backgroundColor: options.primaryColor,\n      borderRadius: 4,\n      color: '#fff',\n    },\n    buttonBack: {\n      ...buttonBase,\n      color: options.primaryColor,\n      marginLeft: 'auto',\n      marginRight: 5,\n    },\n    buttonClose: {\n      ...buttonBase,\n      color: options.textColor,\n      height: 14,\n      padding: 15,\n      position: 'absolute',\n      right: 0,\n      top: 0,\n      width: 14,\n    },\n    buttonSkip: {\n      ...buttonBase,\n      color: options.textColor,\n      fontSize: 14,\n    },\n    overlay: {\n      ...overlay,\n      backgroundColor: options.overlayColor,\n      mixBlendMode: 'hard-light',\n    },\n    overlayLegacy: {\n      ...overlay,\n    },\n    overlayLegacyCenter: {\n      ...overlay,\n      backgroundColor: options.overlayColor,\n    },\n    spotlight: {\n      ...spotlight,\n      backgroundColor: 'gray',\n    },\n    spotlightLegacy: {\n      ...spotlight,\n      boxShadow: `0 0 0 9999px ${options.overlayColor}, ${options.spotlightShadow}`,\n    },\n    floaterStyles: {\n      arrow: {\n        color: mergedFloaterProps?.styles?.arrow?.color ?? options.arrowColor,\n      },\n      options: {\n        zIndex: options.zIndex + 100,\n      },\n    },\n    options,\n  };\n\n  return deepmerge(defaultStyles, mergedStyles) as StylesWithFloaterStyles;\n}\n","import { Props as FloaterProps } from 'react-floater';\nimport is from 'is-lite';\n\nimport { ACTIONS, LIFECYCLE, STATUS } from '~/literals';\n\nimport { Origin, State, Status, Step, StoreHelpers, StoreOptions } from '~/types';\n\nimport { hasValidKeys, objectKeys, omit } from './helpers';\n\ntype StateWithContinuous = State & { continuous: boolean };\ntype Listener = (state: State) => void;\ntype PopperData = Parameters<NonNullable<FloaterProps['getPopper']>>[0];\n\nconst defaultState: State = {\n  action: 'init',\n  controlled: false,\n  index: 0,\n  lifecycle: LIFECYCLE.INIT,\n  origin: null,\n  size: 0,\n  status: STATUS.IDLE,\n};\nconst validKeys = objectKeys(omit(defaultState, 'controlled', 'size'));\n\nclass Store {\n  private beaconPopper: PopperData | null;\n  private tooltipPopper: PopperData | null;\n  private data: Map<string, any> = new Map();\n  private listener: Listener | null;\n  private store: Map<string, any> = new Map();\n\n  constructor(options?: StoreOptions) {\n    const { continuous = false, stepIndex, steps = [] } = options ?? {};\n\n    this.setState(\n      {\n        action: ACTIONS.INIT,\n        controlled: is.number(stepIndex),\n        continuous,\n        index: is.number(stepIndex) ? stepIndex : 0,\n        lifecycle: LIFECYCLE.INIT,\n        origin: null,\n        status: steps.length ? STATUS.READY : STATUS.IDLE,\n      },\n      true,\n    );\n\n    this.beaconPopper = null;\n    this.tooltipPopper = null;\n    this.listener = null;\n    this.setSteps(steps);\n  }\n\n  public getState(): State {\n    if (!this.store.size) {\n      return { ...defaultState };\n    }\n\n    return {\n      action: this.store.get('action') || '',\n      controlled: this.store.get('controlled') || false,\n      index: parseInt(this.store.get('index'), 10),\n      lifecycle: this.store.get('lifecycle') || '',\n      origin: this.store.get('origin') || null,\n      size: this.store.get('size') || 0,\n      status: (this.store.get('status') as Status) || '',\n    };\n  }\n\n  private getNextState(state: Partial<State>, force: boolean = false): State {\n    const { action, controlled, index, size, status } = this.getState();\n    const newIndex = is.number(state.index) ? state.index : index;\n    const nextIndex = controlled && !force ? index : Math.min(Math.max(newIndex, 0), size);\n\n    return {\n      action: state.action ?? action,\n      controlled,\n      index: nextIndex,\n      lifecycle: state.lifecycle ?? LIFECYCLE.INIT,\n      origin: state.origin ?? null,\n      size: state.size ?? size,\n      status: nextIndex === size ? STATUS.FINISHED : (state.status ?? status),\n    };\n  }\n\n  private getSteps(): Array<Step> {\n    const steps = this.data.get('steps');\n\n    return Array.isArray(steps) ? steps : [];\n  }\n\n  private hasUpdatedState(oldState: State): boolean {\n    const before = JSON.stringify(oldState);\n    const after = JSON.stringify(this.getState());\n\n    return before !== after;\n  }\n\n  private setState(nextState: Partial<StateWithContinuous>, initial: boolean = false) {\n    const state = this.getState();\n\n    const {\n      action,\n      index,\n      lifecycle,\n      origin = null,\n      size,\n      status,\n    } = {\n      ...state,\n      ...nextState,\n    };\n\n    this.store.set('action', action);\n    this.store.set('index', index);\n    this.store.set('lifecycle', lifecycle);\n    this.store.set('origin', origin);\n    this.store.set('size', size);\n    this.store.set('status', status);\n\n    if (initial) {\n      this.store.set('controlled', nextState.controlled);\n      this.store.set('continuous', nextState.continuous);\n    }\n\n    if (this.listener && this.hasUpdatedState(state)) {\n      this.listener(this.getState());\n    }\n  }\n\n  public addListener = (listener: Listener) => {\n    this.listener = listener;\n  };\n\n  public setSteps = (steps: Array<Step>) => {\n    const { size, status } = this.getState();\n    const state = {\n      size: steps.length,\n      status,\n    };\n\n    this.data.set('steps', steps);\n\n    if (status === STATUS.WAITING && !size && steps.length) {\n      state.status = STATUS.RUNNING;\n    }\n\n    this.setState(state);\n  };\n\n  public getHelpers(): StoreHelpers {\n    return {\n      close: this.close,\n      go: this.go,\n      info: this.info,\n      next: this.next,\n      open: this.open,\n      prev: this.prev,\n      reset: this.reset,\n      skip: this.skip,\n    };\n  }\n\n  public getPopper = (name: 'beacon' | 'tooltip'): PopperData | null => {\n    if (name === 'beacon') {\n      return this.beaconPopper;\n    }\n\n    return this.tooltipPopper;\n  };\n\n  public setPopper = (name: 'beacon' | 'tooltip', popper: PopperData) => {\n    if (name === 'beacon') {\n      this.beaconPopper = popper;\n    } else {\n      this.tooltipPopper = popper;\n    }\n  };\n\n  public cleanupPoppers = () => {\n    this.beaconPopper = null;\n    this.tooltipPopper = null;\n  };\n\n  public close = (origin: Origin | null = null) => {\n    const { index, status } = this.getState();\n\n    if (status !== STATUS.RUNNING) {\n      return;\n    }\n\n    this.setState({\n      ...this.getNextState({ action: ACTIONS.CLOSE, index: index + 1, origin }),\n    });\n  };\n\n  public go = (nextIndex: number) => {\n    const { controlled, status } = this.getState();\n\n    if (controlled || status !== STATUS.RUNNING) {\n      return;\n    }\n\n    const step = this.getSteps()[nextIndex];\n\n    this.setState({\n      ...this.getNextState({ action: ACTIONS.GO, index: nextIndex }),\n      status: step ? status : STATUS.FINISHED,\n    });\n  };\n\n  public info = (): State => this.getState();\n\n  public next = () => {\n    const { index, status } = this.getState();\n\n    if (status !== STATUS.RUNNING) {\n      return;\n    }\n\n    this.setState(this.getNextState({ action: ACTIONS.NEXT, index: index + 1 }));\n  };\n\n  public open = () => {\n    const { status } = this.getState();\n\n    if (status !== STATUS.RUNNING) {\n      return;\n    }\n\n    this.setState({\n      ...this.getNextState({ action: ACTIONS.UPDATE, lifecycle: LIFECYCLE.TOOLTIP }),\n    });\n  };\n\n  public prev = () => {\n    const { index, status } = this.getState();\n\n    if (status !== STATUS.RUNNING) {\n      return;\n    }\n\n    this.setState({\n      ...this.getNextState({ action: ACTIONS.PREV, index: index - 1 }),\n    });\n  };\n\n  public reset = (restart = false) => {\n    const { controlled } = this.getState();\n\n    if (controlled) {\n      return;\n    }\n\n    this.setState({\n      ...this.getNextState({ action: ACTIONS.RESET, index: 0 }),\n      status: restart ? STATUS.RUNNING : STATUS.READY,\n    });\n  };\n\n  public skip = () => {\n    const { status } = this.getState();\n\n    if (status !== STATUS.RUNNING) {\n      return;\n    }\n\n    this.setState({\n      action: ACTIONS.SKIP,\n      lifecycle: LIFECYCLE.INIT,\n      status: STATUS.SKIPPED,\n    });\n  };\n\n  public start = (nextIndex?: number) => {\n    const { index, size } = this.getState();\n\n    this.setState({\n      ...this.getNextState(\n        {\n          action: ACTIONS.START,\n          index: is.number(nextIndex) ? nextIndex : index,\n        },\n        true,\n      ),\n      status: size ? STATUS.RUNNING : STATUS.WAITING,\n    });\n  };\n\n  public stop = (advance = false) => {\n    const { index, status } = this.getState();\n\n    if (([STATUS.FINISHED, STATUS.SKIPPED] as Array<Status>).includes(status)) {\n      return;\n    }\n\n    this.setState({\n      ...this.getNextState({ action: ACTIONS.STOP, index: index + (advance ? 1 : 0) }),\n      status: STATUS.PAUSED,\n    });\n  };\n\n  public update = (state: Partial<State>) => {\n    if (!hasValidKeys(state, validKeys)) {\n      throw new Error(`State is not valid. Valid keys: ${validKeys.join(', ')}`);\n    }\n\n    this.setState({\n      ...this.getNextState(\n        {\n          ...this.getState(),\n          ...state,\n          action: state.action ?? ACTIONS.UPDATE,\n          origin: state.origin ?? null,\n        },\n        true,\n      ),\n    });\n  };\n}\n\nexport type StoreInstance = ReturnType<typeof createStore>;\n\nexport default function createStore(options?: StoreOptions) {\n  return new Store(options);\n}\n","import * as React from 'react';\nimport treeChanges from 'tree-changes';\n\nimport {\n  getClientRect,\n  getDocumentHeight,\n  getElement,\n  getElementPosition,\n  getScrollParent,\n  hasCustomScrollParent,\n  hasPosition,\n} from '~/modules/dom';\nimport { getBrowser, isLegacy, log } from '~/modules/helpers';\n\nimport { LIFECYCLE } from '~/literals';\n\nimport { Lifecycle, OverlayProps } from '~/types';\n\nimport Spotlight from './Spotlight';\n\ninterface State {\n  isScrolling: boolean;\n  mouseOverSpotlight: boolean;\n  showSpotlight: boolean;\n}\n\ninterface SpotlightStyles extends React.CSSProperties {\n  height: number;\n  left: number;\n  top: number;\n  width: number;\n}\n\nexport default class JoyrideOverlay extends React.Component<OverlayProps, State> {\n  isActive = false;\n  resizeTimeout?: number;\n  scrollTimeout?: number;\n  scrollParent?: Document | Element;\n  state = {\n    isScrolling: false,\n    mouseOverSpotlight: false,\n    showSpotlight: true,\n  };\n\n  componentDidMount() {\n    const { debug, disableScrolling, disableScrollParentFix = false, target } = this.props;\n    const element = getElement(target);\n\n    this.scrollParent = getScrollParent(element ?? document.body, disableScrollParentFix, true);\n    this.isActive = true;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!disableScrolling && hasCustomScrollParent(element, true)) {\n        log({\n          title: 'step has a custom scroll parent and can cause trouble with scrolling',\n          data: [{ key: 'parent', value: this.scrollParent }],\n          debug,\n        });\n      }\n    }\n\n    window.addEventListener('resize', this.handleResize);\n  }\n\n  componentDidUpdate(previousProps: OverlayProps) {\n    const { disableScrollParentFix, lifecycle, spotlightClicks, target } = this.props;\n    const { changed } = treeChanges(previousProps, this.props);\n\n    if (changed('target') || changed('disableScrollParentFix')) {\n      const element = getElement(target);\n\n      this.scrollParent = getScrollParent(element ?? document.body, disableScrollParentFix, true);\n    }\n\n    if (changed('lifecycle', LIFECYCLE.TOOLTIP)) {\n      this.scrollParent?.addEventListener('scroll', this.handleScroll, { passive: true });\n\n      setTimeout(() => {\n        const { isScrolling } = this.state;\n\n        if (!isScrolling) {\n          this.updateState({ showSpotlight: true });\n        }\n      }, 100);\n    }\n\n    if (changed('spotlightClicks') || changed('disableOverlay') || changed('lifecycle')) {\n      if (spotlightClicks && lifecycle === LIFECYCLE.TOOLTIP) {\n        window.addEventListener('mousemove', this.handleMouseMove, false);\n      } else if (lifecycle !== LIFECYCLE.TOOLTIP) {\n        window.removeEventListener('mousemove', this.handleMouseMove);\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.isActive = false;\n\n    window.removeEventListener('mousemove', this.handleMouseMove);\n    window.removeEventListener('resize', this.handleResize);\n\n    clearTimeout(this.resizeTimeout);\n    clearTimeout(this.scrollTimeout);\n    this.scrollParent?.removeEventListener('scroll', this.handleScroll);\n  }\n\n  hideSpotlight = () => {\n    const { continuous, disableOverlay, lifecycle } = this.props;\n    const hiddenLifecycles = [\n      LIFECYCLE.INIT,\n      LIFECYCLE.BEACON,\n      LIFECYCLE.COMPLETE,\n      LIFECYCLE.ERROR,\n    ] as Lifecycle[];\n\n    return (\n      disableOverlay ||\n      (continuous ? hiddenLifecycles.includes(lifecycle) : lifecycle !== LIFECYCLE.TOOLTIP)\n    );\n  };\n\n  get overlayStyles() {\n    const { mouseOverSpotlight } = this.state;\n    const { disableOverlayClose, placement, styles } = this.props;\n\n    let baseStyles = styles.overlay;\n\n    if (isLegacy()) {\n      baseStyles = placement === 'center' ? styles.overlayLegacyCenter : styles.overlayLegacy;\n    }\n\n    return {\n      cursor: disableOverlayClose ? 'default' : 'pointer',\n      height: getDocumentHeight(),\n      pointerEvents: mouseOverSpotlight ? 'none' : 'auto',\n      ...baseStyles,\n    } as React.CSSProperties;\n  }\n\n  get spotlightStyles(): SpotlightStyles {\n    const { showSpotlight } = this.state;\n    const {\n      disableScrollParentFix = false,\n      spotlightClicks,\n      spotlightPadding = 0,\n      styles,\n      target,\n    } = this.props;\n    const element = getElement(target);\n    const elementRect = getClientRect(element);\n    const isFixedTarget = hasPosition(element);\n    const top = getElementPosition(element, spotlightPadding, disableScrollParentFix);\n\n    return {\n      ...(isLegacy() ? styles.spotlightLegacy : styles.spotlight),\n      height: Math.round((elementRect?.height ?? 0) + spotlightPadding * 2),\n      left: Math.round((elementRect?.left ?? 0) - spotlightPadding),\n      opacity: showSpotlight ? 1 : 0,\n      pointerEvents: spotlightClicks ? 'none' : 'auto',\n      position: isFixedTarget ? 'fixed' : 'absolute',\n      top,\n      transition: 'opacity 0.2s',\n      width: Math.round((elementRect?.width ?? 0) + spotlightPadding * 2),\n    } satisfies React.CSSProperties;\n  }\n\n  handleMouseMove = (event: MouseEvent) => {\n    const { mouseOverSpotlight } = this.state;\n    const { height, left, position, top, width } = this.spotlightStyles;\n\n    const offsetY = position === 'fixed' ? event.clientY : event.pageY;\n    const offsetX = position === 'fixed' ? event.clientX : event.pageX;\n    const inSpotlightHeight = offsetY >= top && offsetY <= top + height;\n    const inSpotlightWidth = offsetX >= left && offsetX <= left + width;\n    const inSpotlight = inSpotlightWidth && inSpotlightHeight;\n\n    if (inSpotlight !== mouseOverSpotlight) {\n      this.updateState({ mouseOverSpotlight: inSpotlight });\n    }\n  };\n\n  handleScroll = () => {\n    const { target } = this.props;\n    const element = getElement(target);\n\n    if (this.scrollParent !== document) {\n      const { isScrolling } = this.state;\n\n      if (!isScrolling) {\n        this.updateState({ isScrolling: true, showSpotlight: false });\n      }\n\n      clearTimeout(this.scrollTimeout);\n\n      this.scrollTimeout = window.setTimeout(() => {\n        this.updateState({ isScrolling: false, showSpotlight: true });\n      }, 50);\n    } else if (hasPosition(element, 'sticky')) {\n      this.updateState({});\n    }\n  };\n\n  handleResize = () => {\n    clearTimeout(this.resizeTimeout);\n\n    this.resizeTimeout = window.setTimeout(() => {\n      if (!this.isActive) {\n        return;\n      }\n\n      this.forceUpdate();\n    }, 100);\n  };\n\n  updateState(state: Partial<State>) {\n    if (!this.isActive) {\n      return;\n    }\n\n    this.setState(previousState => ({ ...previousState, ...state }));\n  }\n\n  render() {\n    const { showSpotlight } = this.state;\n    const { onClickOverlay, placement } = this.props;\n    const { hideSpotlight, overlayStyles, spotlightStyles } = this;\n\n    if (hideSpotlight()) {\n      return null;\n    }\n\n    let spotlight = placement !== 'center' && showSpotlight && (\n      <Spotlight styles={spotlightStyles} />\n    );\n\n    // Hack for Safari bug with mix-blend-mode with z-index\n    if (getBrowser() === 'safari') {\n      const { mixBlendMode, zIndex, ...safariOverlay } = overlayStyles;\n\n      spotlight = <div style={{ ...safariOverlay }}>{spotlight}</div>;\n      delete overlayStyles.backgroundColor;\n    }\n\n    return (\n      <div\n        className=\"react-joyride__overlay\"\n        data-test-id=\"overlay\"\n        onClick={onClickOverlay}\n        role=\"presentation\"\n        style={overlayStyles}\n      >\n        {spotlight}\n      </div>\n    );\n  }\n}\n","import * as React from 'react';\n\ninterface Props {\n  styles: React.CSSProperties;\n}\n\nfunction JoyrideSpotlight({ styles }: Props) {\n  return (\n    <div\n      key=\"JoyrideSpotlight\"\n      className=\"react-joyride__spotlight\"\n      data-test-id=\"spotlight\"\n      style={styles}\n    />\n  );\n}\n\nexport default JoyrideSpotlight;\n","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\n\nimport { canUseDOM } from '~/modules/dom';\nimport { isReact16 } from '~/modules/helpers';\n\ninterface Props {\n  children: React.ReactElement;\n  id: string;\n}\n\nexport default class JoyridePortal extends React.Component<Props> {\n  node: HTMLElement | null = null;\n\n  componentDidMount() {\n    const { id } = this.props;\n\n    if (!canUseDOM()) {\n      return;\n    }\n\n    this.node = document.createElement('div');\n    this.node.id = id;\n\n    document.body.appendChild(this.node);\n\n    if (!isReact16) {\n      this.renderReact15();\n    }\n  }\n\n  componentDidUpdate() {\n    if (!canUseDOM()) {\n      return;\n    }\n\n    if (!isReact16) {\n      this.renderReact15();\n    }\n  }\n\n  componentWillUnmount() {\n    if (!canUseDOM() || !this.node) {\n      return;\n    }\n\n    if (!isReact16) {\n      // eslint-disable-next-line react/no-deprecated\n      ReactDOM.unmountComponentAtNode(this.node);\n    }\n\n    if (this.node.parentNode === document.body) {\n      document.body.removeChild(this.node);\n      this.node = null;\n    }\n  }\n\n  renderReact15() {\n    if (!canUseDOM()) {\n      return;\n    }\n\n    const { children } = this.props;\n\n    if (this.node) {\n      ReactDOM.unstable_renderSubtreeIntoContainer(this, children, this.node);\n    }\n  }\n\n  renderReact16() {\n    if (!canUseDOM() || !isReact16) {\n      return null;\n    }\n\n    const { children } = this.props;\n\n    if (!this.node) {\n      return null;\n    }\n\n    return ReactDOM.createPortal(children, this.node);\n  }\n\n  render() {\n    if (!isReact16) {\n      return null;\n    }\n\n    return this.renderReact16();\n  }\n}\n","import * as React from 'react';\nimport Floater, { Props as FloaterProps, RenderProps } from 'react-floater';\nimport is from 'is-lite';\nimport treeChanges from 'tree-changes';\n\nimport { getElement, isElementVisible } from '~/modules/dom';\nimport { hideBeacon, log } from '~/modules/helpers';\nimport Scope from '~/modules/scope';\nimport { validateStep } from '~/modules/step';\n\nimport { ACTIONS, EVENTS, LIFECYCLE, STATUS } from '~/literals';\n\nimport { StepProps } from '~/types';\n\nimport Beacon from './Beacon';\nimport Tooltip from './Tooltip/index';\n\nexport default class JoyrideStep extends React.Component<StepProps> {\n  scope: Scope | null = null;\n  tooltip: HTMLElement | null = null;\n\n  componentDidMount() {\n    const { debug, index } = this.props;\n\n    log({\n      title: `step:${index}`,\n      data: [{ key: 'props', value: this.props }],\n      debug,\n    });\n  }\n\n  componentDidUpdate(previousProps: StepProps) {\n    const {\n      action,\n      callback,\n      continuous,\n      controlled,\n      debug,\n      helpers,\n      index,\n      lifecycle,\n      shouldScroll,\n      status,\n      step,\n      store,\n    } = this.props;\n    const { changed, changedFrom } = treeChanges(previousProps, this.props);\n    const state = helpers.info();\n\n    const skipBeacon =\n      continuous && action !== ACTIONS.CLOSE && (index > 0 || action === ACTIONS.PREV);\n    const hasStoreChanged =\n      changed('action') || changed('index') || changed('lifecycle') || changed('status');\n    const isInitial = changedFrom('lifecycle', [LIFECYCLE.TOOLTIP, LIFECYCLE.INIT], LIFECYCLE.INIT);\n    const isAfterAction = changed('action', [\n      ACTIONS.NEXT,\n      ACTIONS.PREV,\n      ACTIONS.SKIP,\n      ACTIONS.CLOSE,\n    ]);\n    const isControlled = controlled && index === previousProps.index;\n\n    if (isAfterAction && (isInitial || isControlled)) {\n      callback({\n        ...state,\n        index: previousProps.index,\n        lifecycle: LIFECYCLE.COMPLETE,\n        step: previousProps.step,\n        type: EVENTS.STEP_AFTER,\n      });\n    }\n\n    if (\n      step.placement === 'center' &&\n      status === STATUS.RUNNING &&\n      changed('index') &&\n      action !== ACTIONS.START &&\n      lifecycle === LIFECYCLE.INIT\n    ) {\n      store.update({ lifecycle: LIFECYCLE.READY });\n    }\n\n    if (hasStoreChanged) {\n      const element = getElement(step.target);\n      const elementExists = !!element;\n      const hasRenderedTarget = elementExists && isElementVisible(element);\n\n      if (hasRenderedTarget) {\n        if (\n          changedFrom('status', STATUS.READY, STATUS.RUNNING) ||\n          changedFrom('lifecycle', LIFECYCLE.INIT, LIFECYCLE.READY)\n        ) {\n          callback({\n            ...state,\n            step,\n            type: EVENTS.STEP_BEFORE,\n          });\n        }\n      } else {\n        // eslint-disable-next-line no-console\n        console.warn(elementExists ? 'Target not visible' : 'Target not mounted', step);\n        callback({\n          ...state,\n          type: EVENTS.TARGET_NOT_FOUND,\n          step,\n        });\n\n        if (!controlled) {\n          store.update({ index: index + (action === ACTIONS.PREV ? -1 : 1) });\n        }\n      }\n    }\n\n    if (changedFrom('lifecycle', LIFECYCLE.INIT, LIFECYCLE.READY)) {\n      store.update({\n        lifecycle: hideBeacon(step) || skipBeacon ? LIFECYCLE.TOOLTIP : LIFECYCLE.BEACON,\n      });\n    }\n\n    if (changed('index')) {\n      log({\n        title: `step:${lifecycle}`,\n        data: [{ key: 'props', value: this.props }],\n        debug,\n      });\n    }\n\n    if (changed('lifecycle', LIFECYCLE.BEACON)) {\n      callback({\n        ...state,\n        step,\n        type: EVENTS.BEACON,\n      });\n    }\n\n    if (changed('lifecycle', LIFECYCLE.TOOLTIP)) {\n      callback({\n        ...state,\n        step,\n        type: EVENTS.TOOLTIP,\n      });\n\n      if (shouldScroll && this.tooltip) {\n        this.scope = new Scope(this.tooltip, { selector: '[data-action=primary]' });\n        this.scope.setFocus();\n      }\n    }\n\n    if (changedFrom('lifecycle', [LIFECYCLE.TOOLTIP, LIFECYCLE.INIT], LIFECYCLE.INIT)) {\n      this.scope?.removeScope();\n      store.cleanupPoppers();\n    }\n  }\n\n  componentWillUnmount() {\n    this.scope?.removeScope();\n  }\n\n  /**\n   * Beacon click/hover event listener\n   */\n  handleClickHoverBeacon = (event: React.MouseEvent<HTMLElement>) => {\n    const { step, store } = this.props;\n\n    if (event.type === 'mouseenter' && step.event !== 'hover') {\n      return;\n    }\n\n    store.update({ lifecycle: LIFECYCLE.TOOLTIP });\n  };\n\n  setTooltipRef = (element: HTMLElement) => {\n    this.tooltip = element;\n  };\n\n  setPopper: FloaterProps['getPopper'] = (popper, type) => {\n    const { action, lifecycle, step, store } = this.props;\n\n    if (type === 'wrapper') {\n      store.setPopper('beacon', popper);\n    } else {\n      store.setPopper('tooltip', popper);\n    }\n\n    if (\n      store.getPopper('beacon') &&\n      (store.getPopper('tooltip') || step.placement === 'center') &&\n      lifecycle === LIFECYCLE.INIT\n    ) {\n      store.update({\n        action,\n        lifecycle: LIFECYCLE.READY,\n      });\n    }\n\n    if (step.floaterProps?.getPopper) {\n      step.floaterProps.getPopper(popper, type);\n    }\n  };\n\n  get open() {\n    const { lifecycle, step } = this.props;\n\n    return hideBeacon(step) || lifecycle === LIFECYCLE.TOOLTIP;\n  }\n\n  renderTooltip = (renderProps: RenderProps) => {\n    const { continuous, helpers, index, size, step } = this.props;\n\n    return (\n      <Tooltip\n        continuous={continuous}\n        helpers={helpers}\n        index={index}\n        isLastStep={index + 1 === size}\n        setTooltipRef={this.setTooltipRef}\n        size={size}\n        step={step}\n        {...renderProps}\n      />\n    );\n  };\n\n  render() {\n    const { continuous, debug, index, nonce, shouldScroll, size, step } = this.props;\n    const target = getElement(step.target);\n\n    if (!validateStep(step) || !is.domElement(target)) {\n      return null;\n    }\n\n    return (\n      <div key={`JoyrideStep-${index}`} className=\"react-joyride__step\">\n        <Floater\n          {...step.floaterProps}\n          component={this.renderTooltip}\n          debug={debug}\n          getPopper={this.setPopper}\n          id={`react-joyride-step-${index}`}\n          open={this.open}\n          placement={step.placement}\n          target={step.target}\n        >\n          <Beacon\n            beaconComponent={step.beaconComponent}\n            continuous={continuous}\n            index={index}\n            isLastStep={index + 1 === size}\n            locale={step.locale}\n            nonce={nonce}\n            onClickOrHover={this.handleClickHoverBeacon}\n            shouldFocus={shouldScroll}\n            size={size}\n            step={step}\n            styles={step.styles}\n          />\n        </Floater>\n      </div>\n    );\n  }\n}\n","interface ScopeOptions {\n  code?: string;\n  selector: string | null;\n}\n\nexport default class Scope {\n  element: HTMLElement;\n  options: ScopeOptions;\n\n  constructor(element: HTMLElement, options: ScopeOptions) {\n    if (!(element instanceof HTMLElement)) {\n      throw new TypeError('Invalid parameter: element must be an HTMLElement');\n    }\n\n    this.element = element;\n    this.options = options;\n\n    window.addEventListener('keydown', this.handleKeyDown, false);\n\n    this.setFocus();\n  }\n\n  canBeTabbed = (element: HTMLElement): boolean => {\n    const { tabIndex } = element;\n\n    if (tabIndex === null || tabIndex < 0) {\n      return false;\n    }\n\n    return this.canHaveFocus(element);\n  };\n\n  canHaveFocus = (element: HTMLElement): boolean => {\n    const validTabNodes = /input|select|textarea|button|object/;\n    const nodeName = element.nodeName.toLowerCase();\n\n    const isValid =\n      (validTabNodes.test(nodeName) && !element.getAttribute('disabled')) ||\n      (nodeName === 'a' && !!element.getAttribute('href'));\n\n    return isValid && this.isVisible(element);\n  };\n\n  findValidTabElements = (): Array<HTMLElement> =>\n    [].slice.call(this.element.querySelectorAll('*'), 0).filter(this.canBeTabbed);\n\n  handleKeyDown = (event: KeyboardEvent) => {\n    const { code = 'Tab' } = this.options;\n\n    if (event.code === code) {\n      this.interceptTab(event);\n    }\n  };\n\n  interceptTab = (event: KeyboardEvent) => {\n    event.preventDefault();\n    const elements = this.findValidTabElements();\n    const { shiftKey } = event;\n\n    if (!elements.length) {\n      return;\n    }\n\n    let x = document.activeElement ? elements.indexOf(document.activeElement as HTMLElement) : 0;\n\n    if (x === -1 || (!shiftKey && x + 1 === elements.length)) {\n      x = 0;\n    } else if (shiftKey && x === 0) {\n      x = elements.length - 1;\n    } else {\n      x += shiftKey ? -1 : 1;\n    }\n\n    elements[x].focus();\n  };\n\n  // eslint-disable-next-line class-methods-use-this\n  isHidden = (element: HTMLElement) => {\n    const noSize = element.offsetWidth <= 0 && element.offsetHeight <= 0;\n    const style = window.getComputedStyle(element);\n\n    if (noSize && !element.innerHTML) {\n      return true;\n    }\n\n    return (\n      (noSize && style.getPropertyValue('overflow') !== 'visible') ||\n      style.getPropertyValue('display') === 'none'\n    );\n  };\n\n  isVisible = (element: HTMLElement): boolean => {\n    let parentElement: HTMLElement | null = element;\n\n    while (parentElement) {\n      if (parentElement instanceof HTMLElement) {\n        if (parentElement === document.body) {\n          break;\n        }\n\n        if (this.isHidden(parentElement)) {\n          return false;\n        }\n\n        parentElement = parentElement.parentNode as HTMLElement;\n      }\n    }\n\n    return true;\n  };\n\n  removeScope = () => {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  };\n\n  checkFocus = (target: HTMLElement) => {\n    if (document.activeElement !== target) {\n      target.focus();\n      window.requestAnimationFrame(() => this.checkFocus(target));\n    }\n  };\n\n  setFocus = () => {\n    const { selector } = this.options;\n\n    if (!selector) {\n      return;\n    }\n\n    const target = this.element.querySelector(selector);\n\n    if (target) {\n      window.requestAnimationFrame(() => this.checkFocus(target as HTMLElement));\n    }\n  };\n}\n","import * as React from 'react';\nimport is from 'is-lite';\n\nimport { getReactNodeText } from '~/modules/helpers';\n\nimport { BeaconProps } from '~/types';\n\nexport default class JoyrideBeacon extends React.Component<BeaconProps> {\n  private beacon: HTMLElement | null = null;\n\n  constructor(props: BeaconProps) {\n    super(props);\n\n    if (props.beaconComponent) {\n      return;\n    }\n\n    const head = document.head || document.getElementsByTagName('head')[0];\n    const style = document.createElement('style');\n\n    style.id = 'joyride-beacon-animation';\n\n    if (props.nonce) {\n      style.setAttribute('nonce', props.nonce);\n    }\n\n    const css = `\n        @keyframes joyride-beacon-inner {\n          20% {\n            opacity: 0.9;\n          }\n        \n          90% {\n            opacity: 0.7;\n          }\n        }\n        \n        @keyframes joyride-beacon-outer {\n          0% {\n            transform: scale(1);\n          }\n        \n          45% {\n            opacity: 0.7;\n            transform: scale(0.75);\n          }\n        \n          100% {\n            opacity: 0.9;\n            transform: scale(1);\n          }\n        }\n      `;\n\n    style.appendChild(document.createTextNode(css));\n\n    head.appendChild(style);\n  }\n\n  componentDidMount() {\n    const { shouldFocus } = this.props;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!is.domElement(this.beacon)) {\n        console.warn('beacon is not a valid DOM element'); // eslint-disable-line no-console\n      }\n    }\n\n    setTimeout(() => {\n      if (is.domElement(this.beacon) && shouldFocus) {\n        this.beacon.focus();\n      }\n    }, 0);\n  }\n\n  componentWillUnmount() {\n    const style = document.getElementById('joyride-beacon-animation');\n\n    if (style?.parentNode) {\n      style.parentNode.removeChild(style);\n    }\n  }\n\n  setBeaconRef = (c: HTMLElement | null) => {\n    this.beacon = c;\n  };\n\n  render() {\n    const {\n      beaconComponent,\n      continuous,\n      index,\n      isLastStep,\n      locale,\n      onClickOrHover,\n      size,\n      step,\n      styles,\n    } = this.props;\n    const title = getReactNodeText(locale.open);\n    const sharedProps = {\n      'aria-label': title,\n      onClick: onClickOrHover,\n      onMouseEnter: onClickOrHover,\n      ref: this.setBeaconRef,\n      title,\n    };\n    let component;\n\n    if (beaconComponent) {\n      const BeaconComponent = beaconComponent;\n\n      component = (\n        <BeaconComponent\n          continuous={continuous}\n          index={index}\n          isLastStep={isLastStep}\n          size={size}\n          step={step}\n          {...sharedProps}\n        />\n      );\n    } else {\n      component = (\n        <button\n          key=\"JoyrideBeacon\"\n          className=\"react-joyride__beacon\"\n          data-test-id=\"button-beacon\"\n          style={styles.beacon}\n          type=\"button\"\n          {...sharedProps}\n        >\n          <span style={styles.beaconInner} />\n          <span style={styles.beaconOuter} />\n        </button>\n      );\n    }\n\n    return component;\n  }\n}\n","import * as React from 'react';\n\nimport { getReactNodeText, replaceLocaleContent } from '~/modules/helpers';\n\nimport { TooltipProps } from '~/types';\n\nimport Container from './Container';\n\nexport default class JoyrideTooltip extends React.Component<TooltipProps> {\n  handleClickBack = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    const { helpers } = this.props;\n\n    helpers.prev();\n  };\n\n  handleClickClose = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    const { helpers } = this.props;\n\n    helpers.close('button_close');\n  };\n\n  handleClickPrimary = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    const { continuous, helpers } = this.props;\n\n    if (!continuous) {\n      helpers.close('button_primary');\n\n      return;\n    }\n\n    helpers.next();\n  };\n\n  handleClickSkip = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    const { helpers } = this.props;\n\n    helpers.skip();\n  };\n\n  getElementsProps = () => {\n    const { continuous, index, isLastStep, setTooltipRef, size, step } = this.props;\n    const { back, close, last, next, nextLabelWithProgress, skip } = step.locale;\n\n    const backText = getReactNodeText(back);\n    const closeText = getReactNodeText(close);\n    const lastText = getReactNodeText(last);\n    const nextText = getReactNodeText(next);\n    const skipText = getReactNodeText(skip);\n\n    let primary = close;\n    let primaryText = closeText;\n\n    if (continuous) {\n      primary = next;\n      primaryText = nextText;\n\n      if (step.showProgress && !isLastStep) {\n        const labelWithProgress = getReactNodeText(nextLabelWithProgress, {\n          step: index + 1,\n          steps: size,\n        });\n\n        primary = replaceLocaleContent(nextLabelWithProgress, index + 1, size);\n        primaryText = labelWithProgress;\n      }\n\n      if (isLastStep) {\n        primary = last;\n        primaryText = lastText;\n      }\n    }\n\n    return {\n      backProps: {\n        'aria-label': backText,\n        children: back,\n        'data-action': 'back',\n        onClick: this.handleClickBack,\n        role: 'button',\n        title: backText,\n      },\n      closeProps: {\n        'aria-label': closeText,\n        children: close,\n        'data-action': 'close',\n        onClick: this.handleClickClose,\n        role: 'button',\n        title: closeText,\n      },\n      primaryProps: {\n        'aria-label': primaryText,\n        children: primary,\n        'data-action': 'primary',\n        onClick: this.handleClickPrimary,\n        role: 'button',\n        title: primaryText,\n      },\n      skipProps: {\n        'aria-label': skipText,\n        children: skip,\n        'data-action': 'skip',\n        onClick: this.handleClickSkip,\n        role: 'button',\n        title: skipText,\n      },\n      tooltipProps: {\n        'aria-modal': true,\n        ref: setTooltipRef,\n        role: 'alertdialog',\n      },\n    };\n  };\n\n  render() {\n    const { continuous, index, isLastStep, setTooltipRef, size, step } = this.props;\n    const { beaconComponent, tooltipComponent, ...cleanStep } = step;\n    let component;\n\n    if (tooltipComponent) {\n      const renderProps = {\n        ...this.getElementsProps(),\n        continuous,\n        index,\n        isLastStep,\n        size,\n        step: cleanStep,\n        setTooltipRef,\n      };\n\n      const TooltipComponent = tooltipComponent;\n\n      component = <TooltipComponent {...renderProps} />;\n    } else {\n      component = (\n        <Container\n          {...this.getElementsProps()}\n          continuous={continuous}\n          index={index}\n          isLastStep={isLastStep}\n          size={size}\n          step={step}\n        />\n      );\n    }\n\n    return component;\n  }\n}\n","import * as React from 'react';\n\nimport { getReactNodeText } from '~/modules/helpers';\n\nimport { TooltipRenderProps } from '~/types';\n\nimport CloseButton from './CloseButton';\n\nfunction JoyrideTooltipContainer(props: TooltipRenderProps) {\n  const { backProps, closeProps, index, isLastStep, primaryProps, skipProps, step, tooltipProps } =\n    props;\n  const { content, hideBackButton, hideCloseButton, hideFooter, showSkipButton, styles, title } =\n    step;\n  const output: Record<string, React.ReactNode> = {};\n\n  output.primary = (\n    <button\n      data-test-id=\"button-primary\"\n      style={styles.buttonNext}\n      type=\"button\"\n      {...primaryProps}\n    />\n  );\n\n  if (showSkipButton && !isLastStep) {\n    output.skip = (\n      <button\n        aria-live=\"off\"\n        data-test-id=\"button-skip\"\n        style={styles.buttonSkip}\n        type=\"button\"\n        {...skipProps}\n      />\n    );\n  }\n\n  if (!hideBackButton && index > 0) {\n    output.back = (\n      <button data-test-id=\"button-back\" style={styles.buttonBack} type=\"button\" {...backProps} />\n    );\n  }\n\n  output.close = !hideCloseButton && (\n    <CloseButton data-test-id=\"button-close\" styles={styles.buttonClose} {...closeProps} />\n  );\n\n  return (\n    <div\n      key=\"JoyrideTooltip\"\n      aria-label={getReactNodeText(title ?? content)}\n      className=\"react-joyride__tooltip\"\n      style={styles.tooltip}\n      {...tooltipProps}\n    >\n      <div style={styles.tooltipContainer}>\n        {title && (\n          <h1 aria-label={getReactNodeText(title)} style={styles.tooltipTitle}>\n            {title}\n          </h1>\n        )}\n        <div style={styles.tooltipContent}>{content}</div>\n      </div>\n      {!hideFooter && (\n        <div style={styles.tooltipFooter}>\n          <div style={styles.tooltipFooterSpacer}>{output.skip}</div>\n          {output.back}\n          {output.primary}\n        </div>\n      )}\n      {output.close}\n    </div>\n  );\n}\n\nexport default JoyrideTooltipContainer;\n","import React, { CSSProperties } from 'react';\n\ninterface Props {\n  styles: CSSProperties;\n}\n\nfunction JoyrideTooltipCloseButton({ styles, ...props }: Props) {\n  const { color, height, width, ...style } = styles;\n\n  return (\n    <button style={style} type=\"button\" {...props}>\n      <svg\n        height={typeof height === 'number' ? `${height}px` : height}\n        preserveAspectRatio=\"xMidYMid\"\n        version=\"1.1\"\n        viewBox=\"0 0 18 18\"\n        width={typeof width === 'number' ? `${width}px` : width}\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <g>\n          <path\n            d=\"M8.13911129,9.00268191 L0.171521827,17.0258467 C-0.0498027049,17.248715 -0.0498027049,17.6098394 0.171521827,17.8327545 C0.28204354,17.9443526 0.427188206,17.9998706 0.572051765,17.9998706 C0.71714958,17.9998706 0.862013139,17.9443526 0.972581703,17.8327545 L9.0000937,9.74924618 L17.0276057,17.8327545 C17.1384085,17.9443526 17.2832721,17.9998706 17.4281356,17.9998706 C17.5729992,17.9998706 17.718097,17.9443526 17.8286656,17.8327545 C18.0499901,17.6098862 18.0499901,17.2487618 17.8286656,17.0258467 L9.86135722,9.00268191 L17.8340066,0.973848225 C18.0553311,0.750979934 18.0553311,0.389855532 17.8340066,0.16694039 C17.6126821,-0.0556467968 17.254037,-0.0556467968 17.0329467,0.16694039 L9.00042166,8.25611765 L0.967006424,0.167268345 C0.745681892,-0.0553188426 0.387317931,-0.0553188426 0.165993399,0.167268345 C-0.0553311331,0.390136635 -0.0553311331,0.751261038 0.165993399,0.974176179 L8.13920499,9.00268191 L8.13911129,9.00268191 Z\"\n            fill={color}\n          />\n        </g>\n      </svg>\n    </button>\n  );\n}\n\nexport default JoyrideTooltipCloseButton;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}